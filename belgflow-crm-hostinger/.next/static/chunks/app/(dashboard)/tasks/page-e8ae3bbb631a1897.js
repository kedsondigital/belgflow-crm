(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{4625:function(e,s,t){Promise.resolve().then(t.bind(t,1523)),Promise.resolve().then(t.bind(t,49)),Promise.resolve().then(t.bind(t,8459))},8459:function(e,s,t){"use strict";t.r(s),t.d(s,{TasksList:function(){return p}});var a=t(7437),r=t(2265),n=t(9376),i=t(9174),d=t(2381),c=t(9820),l=t(8245),o=t(8933),u=t(5675),m=t(8930),x=t(4438),f=t(3448),h=t(3282);function p(e){let{tasks:s,members:t=[]}=e,p=(0,n.useRouter)(),g=(0,o.e)(),[N,j]=(0,r.useState)(s);(0,r.useEffect)(()=>{j(s)},[s]);let[v,k]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),_=async(e,s)=>{let t="completed"===s?"pending":"completed",{error:a}=await g.from("tasks").update({status:t}).eq("id",e);a?x.Am.error("Erro ao atualizar tarefa"):(x.Am.success("Tarefa atualizada"),j(s=>s.map(s=>s.id===e?{...s,status:t}:s)))},z={pending:"secondary",in_progress:"default",completed:"outline",cancelled:"destructive"};return 0===s.length?(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"py-12 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada"})}):(0,a.jsxs)("div",{className:"space-y-3",children:[N.map(e=>(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.Ol,{className:"py-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(l.X,{checked:"completed"===e.status,onCheckedChange:()=>_(e.id,e.status)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium ".concat("completed"===e.status?"line-through text-muted-foreground":""),children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(i.C,{variant:z[e.status],children:e.status}),(()=>{let s=Array.isArray(e.leads)?e.leads[0]:e.leads;return(null==s?void 0:s.title)?(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Lead: ",s.title]}):null})(),e.due_date&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Prazo: ",new Date(e.due_date).toLocaleDateString("pt-BR")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1 shrink-0",children:[(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"size-8",onClick:()=>{y({id:e.id,title:e.title,description:e.description||null,due_date:e.due_date||null,status:e.status,assigned_to:e.assigned_to||null}),k(!0)},children:(0,a.jsx)(u.Z,{className:"size-4"})}),(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"size-8 text-destructive hover:text-destructive",onClick:async()=>{if(!confirm("Excluir esta tarefa?"))return;let{error:s}=await g.from("tasks").delete().eq("id",e.id);s?x.Am.error((0,f.e)(s,"Erro ao excluir")):(j(s=>s.filter(s=>s.id!==e.id)),x.Am.success("Tarefa exclu\xedda"))},children:(0,a.jsx)(m.Z,{className:"size-4"})})]})]})})},e.id)),(0,a.jsx)(h.t,{open:v,onOpenChange:k,task:b,onTaskUpdated:()=>{p.refresh()},members:t})]})}},8245:function(e,s,t){"use strict";t.d(s,{X:function(){return c}});var a=t(7437),r=t(2265),n=t(7637),i=t(401),d=t(3448);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,d.cn)("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(n.z$,{className:(0,d.cn)("grid place-content-center text-current"),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=n.fC.displayName}},function(e){e.O(0,[208,438,530,559,590,2,745,74,78,971,117,744],function(){return e(e.s=4625)}),_N_E=e.O()}]);