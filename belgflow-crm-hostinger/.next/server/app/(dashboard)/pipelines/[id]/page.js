(()=>{var e={};e.id=328,e.ids=[328],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},8675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(8794),r(9868),r(5629),r(1928),r(7407),r(5866),r(5649);var n=r(3191),l=r(8716),a=r(7922),i=r.n(a),s=r(5231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let d=["",{children:["(dashboard)",{children:["pipelines",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8794)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\[id]\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,9868)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\[id]\\loading.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,5629)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1928)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,7407)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,5649)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\[id]\\page.tsx"],u="/(dashboard)/pipelines/[id]/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(dashboard)/pipelines/[id]/page",pathname:"/pipelines/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5066:(e,t,r)=>{Promise.resolve().then(r.bind(r,4590)),Promise.resolve().then(r.bind(r,4094))},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(5578).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7136:(e,t,r)=>{"use strict";r.d(t,{i:()=>h});var n=r(326),l=r(7577),a=r(5047),i=r(9701),s=r(4118),o=r(1664),d=r(1190),c=r(4794),u=r(5999);function h({open:e,onOpenChange:t,onCreated:r}){let h=(0,a.useRouter)(),[p,f]=(0,l.useState)(""),[m,g]=(0,l.useState)(""),[x,v]=(0,l.useState)(!1),y=async e=>{if(e.preventDefault(),!p.trim()){u.Am.error("Nome \xe9 obrigat\xf3rio");return}v(!0);try{let e=(0,i.e)(),{data:{user:n}}=await e.auth.getUser();if(!n)throw Error("N\xe3o autenticado");let{data:l,error:a}=await e.from("pipelines").insert({name:p.trim(),description:m.trim()||null,created_by:n.id}).select("id").single();if(a)throw a;let{error:s}=await e.from("pipeline_members").insert({pipeline_id:l.id,user_id:n.id,role_in_pipeline:"admin"});if(s)throw s;let{error:o}=await e.from("stages").insert([{name:"Entrada",position:0},{name:"Qualifica\xe7\xe3o",position:1},{name:"Proposta",position:2},{name:"Negocia\xe7\xe3o",position:3},{name:"Fechado",position:4}].map(e=>({pipeline_id:l.id,name:e.name,position:e.position})));if(o)throw o;f(""),g(""),t(!1),u.Am.success("Pipeline criado com sucesso!"),r?r(l.id):(h.push(`/pipelines/${l.id}`),h.refresh())}catch(t){let e=t&&"object"==typeof t&&"message"in t?String(t.message):t instanceof Error?t.message:"Erro ao criar pipeline";u.Am.error(e)}finally{v(!1)}},b=()=>{f(""),g(""),t(!1)};return n.jsx(s.Vq,{open:e,onOpenChange:b,children:(0,n.jsxs)(s.cZ,{children:[(0,n.jsxs)(s.fK,{children:[n.jsx(s.$N,{children:"Novo Pipeline"}),n.jsx(s.Be,{children:"Crie um novo pipeline com est\xe1gios padr\xe3o (Entrada, Qualifica\xe7\xe3o, Proposta, Negocia\xe7\xe3o, Fechado)"})]}),(0,n.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx(c._,{htmlFor:"pipeline-name",children:"Nome do pipeline *"}),n.jsx(d.I,{id:"pipeline-name",placeholder:"Ex: Vendas 2025",value:p,onChange:e=>f(e.target.value),required:!0,disabled:x})]}),(0,n.jsxs)("div",{children:[n.jsx(c._,{htmlFor:"pipeline-desc",children:"Descri\xe7\xe3o (opcional)"}),n.jsx(d.I,{id:"pipeline-desc",placeholder:"Breve descri\xe7\xe3o do pipeline",value:m,onChange:e=>g(e.target.value),disabled:x})]}),(0,n.jsxs)(s.cN,{children:[n.jsx(o.z,{type:"button",variant:"outline",onClick:b,children:"Cancelar"}),n.jsx(o.z,{type:"submit",disabled:x||!p.trim(),children:x?"Criando...":"Criar pipeline"})]})]})]})})}},4590:(e,t,r)=>{"use strict";r.d(t,{PipelineNameSetter:()=>l}),r(7577);var n=r(6972);function l({name:e}){let{setPipelineName:t}=(0,n.V)();return null}},4094:(e,t,r)=>{"use strict";let n;r.d(t,{PipelineView:()=>ne});var l,a,i,s,o,d,c,u,h,p,f=r(326),m=r(7577),g=r.n(m),x=r(5047),v=r(3855),y=r(1664),b=r(9280),w=r(7136),j=r(9701),D=r(4118),C=r(1190),_=r(4794);let N=[{code:"32",country:"B\xe9lgica",flag:"\uD83C\uDDE7\uD83C\uDDEA"},{code:"55",country:"Brasil",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"1",country:"EUA/Canad\xe1",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"351",country:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9"},{code:"34",country:"Espanha",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"33",country:"Fran\xe7a",flag:"\uD83C\uDDEB\uD83C\uDDF7"},{code:"49",country:"Alemanha",flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"39",country:"It\xe1lia",flag:"\uD83C\uDDEE\uD83C\uDDF9"},{code:"44",country:"Reino Unido",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"52",country:"M\xe9xico",flag:"\uD83C\uDDF2\uD83C\uDDFD"},{code:"54",country:"Argentina",flag:"\uD83C\uDDE6\uD83C\uDDF7"},{code:"56",country:"Chile",flag:"\uD83C\uDDE8\uD83C\uDDF1"},{code:"57",country:"Col\xf4mbia",flag:"\uD83C\uDDE8\uD83C\uDDF4"},{code:"58",country:"Venezuela",flag:"\uD83C\uDDFB\uD83C\uDDEA"},{code:"51",country:"Peru",flag:"\uD83C\uDDF5\uD83C\uDDEA"},{code:"595",country:"Paraguai",flag:"\uD83C\uDDF5\uD83C\uDDFE"},{code:"598",country:"Uruguai",flag:"\uD83C\uDDFA\uD83C\uDDFE"},{code:"31",country:"Holanda",flag:"\uD83C\uDDF3\uD83C\uDDF1"},{code:"86",country:"China",flag:"\uD83C\uDDE8\uD83C\uDDF3"},{code:"81",country:"Jap\xe3o",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"91",country:"\xcdndia",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"7",country:"R\xfassia",flag:"\uD83C\uDDF7\uD83C\uDDFA"},{code:"61",country:"Austr\xe1lia",flag:"\uD83C\uDDE6\uD83C\uDDFA"},{code:"27",country:"\xc1frica do Sul",flag:"\uD83C\uDDFF\uD83C\uDDE6"},{code:"234",country:"Nig\xe9ria",flag:"\uD83C\uDDF3\uD83C\uDDEC"},{code:"971",country:"EAU",flag:"\uD83C\uDDE6\uD83C\uDDEA"},{code:"353",country:"Irlanda",flag:"\uD83C\uDDEE\uD83C\uDDEA"},{code:"43",country:"\xc1ustria",flag:"\uD83C\uDDE6\uD83C\uDDF9"},{code:"41",country:"Su\xed\xe7a",flag:"\uD83C\uDDE8\uD83C\uDDED"},{code:"48",country:"Pol\xf4nia",flag:"\uD83C\uDDF5\uD83C\uDDF1"},{code:"46",country:"Su\xe9cia",flag:"\uD83C\uDDF8\uD83C\uDDEA"},{code:"47",country:"Noruega",flag:"\uD83C\uDDF3\uD83C\uDDF4"},{code:"45",country:"Dinamarca",flag:"\uD83C\uDDE9\uD83C\uDDF0"},{code:"358",country:"Finl\xe2ndia",flag:"\uD83C\uDDEB\uD83C\uDDEE"},{code:"30",country:"Gr\xe9cia",flag:"\uD83C\uDDEC\uD83C\uDDF7"},{code:"90",country:"Turquia",flag:"\uD83C\uDDF9\uD83C\uDDF7"},{code:"62",country:"Indon\xe9sia",flag:"\uD83C\uDDEE\uD83C\uDDE9"},{code:"65",country:"Singapura",flag:"\uD83C\uDDF8\uD83C\uDDEC"},{code:"60",country:"Mal\xe1sia",flag:"\uD83C\uDDF2\uD83C\uDDFE"},{code:"66",country:"Tail\xe2ndia",flag:"\uD83C\uDDF9\uD83C\uDDED"},{code:"84",country:"Vietn\xe3",flag:"\uD83C\uDDFB\uD83C\uDDF3"}];function E({countryCode:e,number:t,onCountryCodeChange:r,onNumberChange:n,placeholder:l="99999-9999",disabled:a,id:i}){return(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsxs)(b.Ph,{value:e||"32",onValueChange:r,disabled:a,children:[f.jsx(b.i4,{className:"w-[110px] shrink-0",children:f.jsx(b.ki,{placeholder:"+32"})}),f.jsx(b.Bw,{children:N.map(e=>(0,f.jsxs)(b.Ql,{value:e.code,children:[e.flag," +",e.code]},e.code))})]}),f.jsx(C.I,{id:i,placeholder:l,value:t,onChange:e=>n(e.target.value),disabled:a,className:"flex-1"})]})}var S=r(5999),R=r(1223);let A=["Brasil","Portugal","Espanha","Argentina","EUA","Reino Unido","Fran\xe7a","Alemanha","It\xe1lia","M\xe9xico","Chile","Col\xf4mbia","Outro"];function P({open:e,onOpenChange:t,pipelineId:r,stageId:n,stageName:l,position:a,stages:i,onLeadCreated:s}){let[o,d]=(0,m.useState)(n||""),c=n||o,u=i?.find(e=>e.id===c),h=l||u?.name||"",p=a??u?.leads?.length??0,[g,x]=(0,m.useState)(""),[v,w]=(0,m.useState)(""),[N,P]=(0,m.useState)("32"),[k,M]=(0,m.useState)(""),[T,z]=(0,m.useState)(""),[O,F]=(0,m.useState)("__none__"),[L,I]=(0,m.useState)(""),[B,W]=(0,m.useState)(!1),$=async e=>{if(e.preventDefault(),!g.trim()){S.Am.error("Nome/empresa \xe9 obrigat\xf3rio");return}if(!c){S.Am.error("Selecione o est\xe1gio");return}W(!0);try{let e=k.trim()?`${N}${k.replace(/\D/g,"")}`:null,n=L?parseFloat(String(L).replace(/\./g,"").replace(",",".")):null,l=null==n||Number.isNaN(n)?null:n,{data:a,error:i}=await (0,j.e)().from("leads").insert({pipeline_id:r,stage_id:c,title:g.trim(),email:v.trim()||null,phone:k.trim()||null,phone_country_code:k.trim()?N:null,whatsapp:e,resumo:T.trim()||null,nacionalidade:O&&"__none__"!==O?O:null,valor:l??null,source:"manual",position:p}).select().single();if(i)throw i;await (0,j.e)().from("lead_activities").insert({lead_id:a.id,type:"created",payload:{}}),x(""),w(""),M(""),P("32"),z(""),F("__none__"),I(""),t(!1),s(a),S.Am.success("Lead adicionado!")}catch(e){S.Am.error((0,R.e)(e,"Erro ao criar lead"))}finally{W(!1)}},V=()=>{x(""),w(""),M(""),P("55"),z(""),F("__none__"),I(""),t(!1)};return f.jsx(D.Vq,{open:e,onOpenChange:V,children:(0,f.jsxs)(D.cZ,{className:"max-h-[90vh] overflow-y-auto",children:[(0,f.jsxs)(D.fK,{children:[f.jsx(D.$N,{children:"Adicionar lead"}),f.jsx(D.Be,{children:h?`Novo lead no est\xe1gio ${h}`:"Preencha os dados do lead"})]}),(0,f.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[i&&i.length>0&&!n&&(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Est\xe1gio *"}),(0,f.jsxs)(b.Ph,{value:c,onValueChange:d,required:!0,disabled:B,children:[f.jsx(b.i4,{children:f.jsx(b.ki,{placeholder:"Selecione o est\xe1gio"})}),f.jsx(b.Bw,{children:i.map(e=>f.jsx(b.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"lead-title",children:"Nome / Empresa *"}),f.jsx(C.I,{id:"lead-title",placeholder:"Ex: Empresa XYZ",value:g,onChange:e=>x(e.target.value),required:!0,disabled:B})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Telefone / WhatsApp (com DDI do pa\xeds)"}),f.jsx(E,{countryCode:N,number:k,onCountryCodeChange:P,onNumberChange:M,placeholder:"(11) 99999-9999",disabled:B})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"lead-email",children:"Email"}),f.jsx(C.I,{id:"lead-email",type:"email",placeholder:"contato@empresa.com",value:v,onChange:e=>w(e.target.value),disabled:B})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"lead-resumo",children:"Resumo"}),f.jsx("textarea",{id:"lead-resumo",className:"w-full min-h-[60px] rounded-md border px-3 py-2 text-sm",placeholder:"Breve resumo do lead...",value:T,onChange:e=>z(e.target.value),disabled:B})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Poss\xedvel nacionalidade"}),(0,f.jsxs)(b.Ph,{value:O,onValueChange:F,disabled:B,children:[f.jsx(b.i4,{children:f.jsx(b.ki,{placeholder:"Selecione"})}),(0,f.jsxs)(b.Bw,{children:[f.jsx(b.Ql,{value:"__none__",children:"Nenhuma"}),A.map(e=>f.jsx(b.Ql,{value:e,children:e},e))]})]})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"lead-valor",children:"Valor (â‚¬)"}),f.jsx(C.I,{id:"lead-valor",type:"text",inputMode:"decimal",placeholder:"Ex: 1.000,00 ou 1000",value:L,onChange:e=>I(e.target.value),disabled:B})]}),(0,f.jsxs)(D.cN,{children:[f.jsx(y.z,{type:"button",variant:"outline",onClick:V,children:"Cancelar"}),f.jsx(y.z,{type:"submit",disabled:B||!g.trim()||!c,children:B?"Adicionando...":"Adicionar"})]})]})]})})}function k({pipelines:e,currentPipelineId:t,stages:r=[],onLeadAdded:n,members:l=[],assigneeFilter:a="__all__",onAssigneeFilterChange:i}){let s=(0,x.useRouter)(),[o,d]=(0,m.useState)(!1),[c,u]=(0,m.useState)(!1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[(0,f.jsxs)(b.Ph,{value:t,onValueChange:e=>s.push(`/pipelines/${e}`),children:[f.jsx(b.i4,{className:"w-[220px]",children:f.jsx(b.ki,{placeholder:"Selecione o pipeline"})}),f.jsx(b.Bw,{children:e.map(e=>f.jsx(b.Ql,{value:e.id,children:e.name},e.id))})]}),(0,f.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[f.jsx(v.Z,{className:"mr-2 size-4"}),"Novo pipeline"]}),r.length>0&&(0,f.jsxs)(y.z,{size:"sm",onClick:()=>u(!0),children:[f.jsx(v.Z,{className:"mr-2 size-4"}),"Adicionar lead"]}),i&&(0,f.jsxs)(b.Ph,{value:a,onValueChange:i,children:[f.jsx(b.i4,{className:"w-[180px]",children:f.jsx(b.ki,{placeholder:"Respons\xe1vel"})}),(0,f.jsxs)(b.Bw,{children:[f.jsx(b.Ql,{value:"__all__",children:"Todos"}),f.jsx(b.Ql,{value:"__unassigned__",children:"N\xe3o atribu\xeddos"}),l.filter(e=>e.name||e.email).map(e=>f.jsx(b.Ql,{value:e.id,children:e.name||e.email},e.id))]})]})]}),f.jsx(P,{open:c,onOpenChange:u,pipelineId:t,stages:r,onLeadCreated:()=>{n?.(),s.refresh()}}),f.jsx(w.i,{open:o,onOpenChange:d,onCreated:e=>{s.push(`/pipelines/${e}`),s.refresh()}})]})}var M=r(962);function T(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function z(e){return"nodeType"in e}function O(e){var t,r;return e?T(e)?e:z(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function F(e){let{Document:t}=O(e);return e instanceof t}function L(e){return!T(e)&&e instanceof O(e).HTMLElement}function I(e){return e instanceof O(e).SVGElement}function B(e){return e?T(e)?e.document:z(e)?F(e)?e:L(e)||I(e)?e.ownerDocument:document:document:document}let W=m.useEffect;function $(e){let t=(0,m.useRef)(e);return W(()=>{t.current=e}),(0,m.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function V(e,t){void 0===t&&(t=[e]);let r=(0,m.useRef)(e);return W(()=>{r.current!==e&&(r.current=e)},t),r}function q(e,t){let r=(0,m.useRef)();return(0,m.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function U(e){let t=$(e),r=(0,m.useRef)(null),n=(0,m.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function X(e){return(0,m.useRef)().current}let Y={};function Z(e,t){return(0,m.useMemo)(()=>{if(t)return t;let r=null==Y[e]?0:Y[e]+1;return Y[e]=r,e+"-"+r},[e,t])}function H(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];return n.reduce((t,r)=>{for(let[n,l]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*l)}return t},{...t})}}let K=H(1),Q=H(-1);function J(e){if(!e)return!1;let{KeyboardEvent:t}=O(e.target);return t&&e instanceof t}function G(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=O(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let ee=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ee.Translate.toString(e),ee.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),et={display:"none"};function er(e){let{id:t,value:r}=e;return g().createElement("div",{id:t,style:et},r)}function en(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return g().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let el=(0,m.createContext)(null),ea={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ei={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function es(e){let{announcements:t=ei,container:r,hiddenTextDescribedById:n,screenReaderInstructions:l=ea}=e,{announce:a,announcement:i}=function(){let[e,t]=(0,m.useState)("");return{announce:(0,m.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),s=Z("DndLiveRegion"),[o,d]=(0,m.useState)(!1);if((0,m.useMemo)(()=>({onDragStart(e){let{active:r}=e;a(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&a(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;a(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;a(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;a(t.onDragCancel({active:r,over:n}))}}),[a,t]),(0,m.useContext)(el),!o)return null;let c=g().createElement(g().Fragment,null,g().createElement(er,{id:n,value:l.draggable}),g().createElement(en,{id:s,announcement:i}));return r?(0,M.createPortal)(c,r):c}function eo(){}function ed(e,t){return(0,m.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(l||(l={}));let ec=Object.freeze({x:0,y:0});function eu(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let eh=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,l=[];for(let e of n){let{id:n}=e,a=r.get(n);if(a){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);if(n<l&&r<a){let i=t.width*t.height,s=e.width*e.height,o=(l-n)*(a-r);return Number((o/(i+s-o)).toFixed(4))}return 0}(a,t);r>0&&l.push({id:n,data:{droppableContainer:e,value:r}})}}return l.sort(eu)};function ep(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ec}let ef=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}(1);function em(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let eg={ignoreTransform:!1};function ex(e,t){void 0===t&&(t=eg);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=O(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=em(t);if(!n)return e;let{scaleX:l,scaleY:a,x:i,y:s}=n,o=e.left-i-(1-l)*parseFloat(r),d=e.top-s-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),c=l?e.width/l:e.width,u=a?e.height/a:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,n))}let{top:n,left:l,width:a,height:i,bottom:s,right:o}=r;return{top:n,left:l,width:a,height:i,bottom:s,right:o}}function ev(e){return ex(e,{ignoreTransform:!0})}function ey(e,t){let r=[];return e?function n(l){var a;if(null!=t&&r.length>=t||!l)return r;if(F(l)&&null!=l.scrollingElement&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!L(l)||I(l)||r.includes(l))return r;let i=O(e).getComputedStyle(l);return(l!==e&&function(e,t){void 0===t&&(t=O(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let n=t[e];return"string"==typeof n&&r.test(n)})}(l,i)&&r.push(l),void 0===(a=i)&&(a=O(l).getComputedStyle(l)),"fixed"===a.position)?r:n(l.parentNode)}(e):r}function eb(e){let[t]=ey(e,1);return null!=t?t:null}function ew(e){return T(e)?e.scrollX:e.scrollLeft}function ej(e){return T(e)?e.scrollY:e.scrollTop}function eD(e){return{x:ew(e),y:ej(e)}}function eC(e){let t={x:0,y:0},r={height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y;return{isTop:l,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(a||(a={}));let e_={x:.2,y:.2};function eN(e){return e.reduce((e,t)=>K(e,eD(t)),ec)}function eE(e,t){if(void 0===t&&(t=ex),!e)return;let{top:r,left:n,bottom:l,right:a}=t(e);eb(e)&&(l<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eS=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ew(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ej(t),0)}]];class eR{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=ey(t),n=eN(r);for(let[t,l,a]of(this.rect={...e},this.width=e.width,this.height=e.height,eS))for(let e of l)Object.defineProperty(this,e,{get:()=>{let l=a(r),i=n[t]-l;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eA{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eP(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function ek(e){e.preventDefault()}function eM(e){e.stopPropagation()}(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(i||(i={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(s||(s={}));let eT={start:[s.Space,s.Enter],cancel:[s.Esc],end:[s.Space,s.Enter,s.Tab]},ez=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case s.Right:return{...r,x:r.x+25};case s.Left:return{...r,x:r.x-25};case s.Down:return{...r,y:r.y+25};case s.Up:return{...r,y:r.y-25}}};class eO{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new eA(B(t)),this.windowListeners=new eA(O(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(i.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eE(r),t(ec)}handleKeyDown(e){if(J(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:l=eT,coordinateGetter:a=ez,scrollBehavior:i="smooth"}=n,{code:o}=e;if(l.end.includes(o)){this.handleEnd(e);return}if(l.cancel.includes(o)){this.handleCancel(e);return}let{collisionRect:d}=r.current,c=d?{x:d.left,y:d.top}:ec;this.referenceCoordinates||(this.referenceCoordinates=c);let u=a(e,{active:t,context:r.current,currentCoordinates:c});if(u){let t=Q(u,c),n={x:0,y:0},{scrollableAncestors:l}=r.current;for(let r of l){let l=e.code,{isTop:a,isRight:o,isLeft:d,isBottom:c,maxScroll:h,minScroll:p}=eC(r),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:l,width:e.clientWidth,height:e.clientHeight}}(r),m={x:Math.min(l===s.Right?f.right-f.width/2:f.right,Math.max(l===s.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(l===s.Down?f.bottom-f.height/2:f.bottom,Math.max(l===s.Down?f.top:f.top+f.height/2,u.y))},g=l===s.Right&&!o||l===s.Left&&!d,x=l===s.Down&&!c||l===s.Up&&!a;if(g&&m.x!==u.x){let e=r.scrollLeft+t.x,a=l===s.Right&&e<=h.x||l===s.Left&&e>=p.x;if(a&&!t.y){r.scrollTo({left:e,behavior:i});return}a?n.x=r.scrollLeft-e:n.x=l===s.Right?r.scrollLeft-h.x:r.scrollLeft-p.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(x&&m.y!==u.y){let e=r.scrollTop+t.y,a=l===s.Down&&e<=h.y||l===s.Up&&e>=p.y;if(a&&!t.x){r.scrollTo({top:e,behavior:i});return}a?n.y=r.scrollTop-e:n.y=l===s.Down?r.scrollTop-h.y:r.scrollTop-p.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,K(Q(u,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eF(e){return!!(e&&"distance"in e)}function eL(e){return!!(e&&"delay"in e)}eO.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=eT,onActivation:l}=t,{active:a}=r,{code:i}=e.nativeEvent;if(n.start.includes(i)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class eI{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=O(e);return e instanceof t?e:B(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=B(a),this.documentListeners=new eA(this.document),this.listeners=new eA(r),this.windowListeners=new eA(O(a)),this.initialCoordinates=null!=(n=G(l))?n:ec,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.DragStart,ek),this.windowListeners.add(i.VisibilityChange,this.handleCancel),this.windowListeners.add(i.ContextMenu,ek),this.documentListeners.add(i.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eL(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eF(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(i.Click,eM,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(i.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!n)return;let s=null!=(t=G(e))?t:ec,o=Q(n,s);if(!r&&i){if(eF(i)){if(null!=i.tolerance&&eP(o,i.tolerance))return this.handleCancel();if(eP(o,i.distance))return this.handleStart()}return eL(i)&&eP(o,i.tolerance)?this.handleCancel():void this.handlePending(i,o)}e.cancelable&&e.preventDefault(),a(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===s.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eW extends eI{constructor(e){let{event:t}=e;super(e,eB,B(t.target))}}eW.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];let e$={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(o||(o={}));class eV extends eI{constructor(e){super(e,e$,B(e.event.target))}}eV.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==o.RightClick&&(null==n||n({event:r}),!0)}}];let eq={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eU extends eI{constructor(e){super(e,eq)}static setup(){return window.addEventListener(eq.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eq.move.name,e)};function e(){}}}eU.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:l}=r;return!(l.length>1)&&(null==n||n({event:r}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(d||(d={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(c||(c={}));let eX={x:{[a.Backward]:!1,[a.Forward]:!1},y:{[a.Backward]:!1,[a.Forward]:!1}};(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(u||(u={})),(h||(h={})).Optimized="optimized";let eY=new Map;function eZ(e,t){return q(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function eH(e){let{callback:t,disabled:r}=e;return $(t),(0,m.useMemo)(()=>{},[r])}function eK(e){return new eR(ex(e),e)}function eQ(e,t,r){void 0===t&&(t=eK);let[n,l]=(0,m.useState)(null);function a(){l(n=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=n?n:r)?l:null}let a=t(e);return JSON.stringify(n)===JSON.stringify(a)?n:a})}let i=function(e){let{callback:t,disabled:r}=e,n=$(t);return(0,m.useMemo)(()=>{},[n,r])}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){a();break}}}}),s=eH({callback:a});return W(()=>{a(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),n}let eJ=[];function eG(e,t){void 0===t&&(t=[]);let r=(0,m.useRef)(null);return r.current?Q(e,r.current):ec}function e0(e){return(0,m.useMemo)(()=>e?function(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}let e1=[];function e2(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return L(t)?t:e}let e3=[{sensor:eW,options:{}},{sensor:eO,options:{}}],e8={current:{}},e4={draggable:{measure:ev},droppable:{measure:ev,strategy:u.WhileDragging,frequency:h.Optimized},dragOverlay:{measure:ex}};class e5 extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let e9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new e5,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:e4,measureDroppableContainers:eo,windowRect:null,measuringScheduled:!1},e6={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eo,draggableNodes:new Map,over:null,measureDroppableContainers:eo},e7=(0,m.createContext)(e6),te=(0,m.createContext)(e9);function tt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new e5}}}function tr(e,t){switch(t.type){case l.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case l.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case l.DragEnd:case l.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case l.RegisterDroppable:{let{element:r}=t,{id:n}=r,l=new e5(e.droppable.containers);return l.set(n,r),{...e,droppable:{...e.droppable,containers:l}}}case l.SetDroppableDisabled:{let{id:r,key:n,disabled:l}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let i=new e5(e.droppable.containers);return i.set(r,{...a,disabled:l}),{...e,droppable:{...e.droppable,containers:i}}}case l.UnregisterDroppable:{let{id:r,key:n}=t,l=e.droppable.containers.get(r);if(!l||n!==l.key)return e;let a=new e5(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function tn(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:l}=(0,m.useContext)(e7);return X(n),X(null==r?void 0:r.id),null}function tl(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let ta=(0,m.createContext)({...ec,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(p||(p={}));let ti=(0,m.memo)(function(e){var t,r,n,i,s,o;let{id:h,accessibility:f,autoScroll:x=!0,children:v,sensors:y=e3,collisionDetection:b=eh,measuring:w,modifiers:j,...D}=e,[C,_]=(0,m.useReducer)(tr,void 0,tt),[N,E]=function(){let[e]=(0,m.useState)(()=>new Set),t=(0,m.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,m.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[S,R]=(0,m.useState)(p.Uninitialized),A=S===p.Initialized,{draggable:{active:P,nodes:k,translate:T},droppable:{containers:z}}=C,F=null!=P?k.get(P):null,I=(0,m.useRef)({initial:null,translated:null}),B=(0,m.useMemo)(()=>{var e;return null!=P?{id:P,data:null!=(e=null==F?void 0:F.data)?e:e8,rect:I}:null},[P,F]),$=(0,m.useRef)(null),[Y,H]=(0,m.useState)(null),[Q,J]=(0,m.useState)(null),ee=V(D,Object.values(D)),et=Z("DndDescribedBy",h),er=(0,m.useMemo)(()=>z.getEnabled(),[z]),en=(0,m.useMemo)(()=>({draggable:{...e4.draggable,...null==w?void 0:w.draggable},droppable:{...e4.droppable,...null==w?void 0:w.droppable},dragOverlay:{...e4.dragOverlay,...null==w?void 0:w.dragOverlay}}),[null==w?void 0:w.draggable,null==w?void 0:w.droppable,null==w?void 0:w.dragOverlay]),{droppableRects:ea,measureDroppableContainers:ei,measuringScheduled:eo}=function(e,t){let{dragging:r,dependencies:n,config:l}=t,[a,i]=(0,m.useState)(null),{frequency:s,measure:o,strategy:d}=l,c=(0,m.useRef)(e),h=function(){switch(d){case u.Always:return!1;case u.BeforeDragging:return r;default:return!r}}(),p=V(h),f=(0,m.useCallback)(function(e){void 0===e&&(e=[]),p.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]);(0,m.useRef)(null);let g=q(t=>{if(h&&!r)return eY;if(!t||t===eY||c.current!==e||null!=a){let t=new Map;for(let r of e){if(!r)continue;if(a&&a.length>0&&!a.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new eR(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,a,r,h,o]);return(0,m.useEffect)(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=a}}(er,{dragging:A,dependencies:[T.x,T.y],config:en.droppable}),ed=function(e,t){let r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return q(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(k,P),eu=(0,m.useMemo)(()=>Q?G(Q):null,[Q]),em=function(){let e=(null==Y?void 0:Y.autoScrollEnabled)===!1,t="object"==typeof x?!1===x.enabled:!1===x,r=A&&!e&&!t;return"object"==typeof x?{...x,enabled:r}:{enabled:r}}(),eg=eZ(ed,en.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:l=!0}=e,a=(0,m.useRef)(!1),{x:i,y:s}="boolean"==typeof l?{x:l,y:l}:l;W(()=>{if(!i&&!s||!t){a.current=!1;return}if(a.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=ep(r(e),n);if(i||(l.x=0),s||(l.y=0),a.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=eb(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,i,s,n,r])}({activeNode:null!=P?k.get(P):null,config:em.layoutShiftCompensation,initialRect:eg,measure:en.draggable.measure});let ev=eQ(ed,en.draggable.measure,eg),ew=eQ(ed?ed.parentElement:null),ej=(0,m.useRef)({activatorEvent:null,active:null,activeNode:ed,collisionRect:null,collisions:null,droppableRects:ea,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eE=z.getNodeFor(null==(t=ej.current.over)?void 0:t.id),eS=function(e){let{measure:t}=e,[r,n]=(0,m.useState)(null),l=eH({callback:(0,m.useCallback)(e=>{for(let{target:r}of e)if(L(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[a,i]=U((0,m.useCallback)(e=>{let r=e2(e);null==l||l.disconnect(),r&&(null==l||l.observe(r)),n(r?t(r):null)},[t,l]));return(0,m.useMemo)(()=>({nodeRef:a,rect:r,setRef:i}),[r,a,i])}({measure:en.dragOverlay.measure}),eA=null!=(r=eS.nodeRef.current)?r:ed,eP=A?null!=(n=eS.rect)?n:ev:null,ek=!!(eS.nodeRef.current&&eS.rect),eM=function(e){let t=eZ(e);return ep(e,t)}(ek?null:ev),eT=e0(eA?O(eA):null),ez=function(e){let t=(0,m.useRef)(e);return q(r=>e?r&&r!==eJ&&e&&t.current&&e.parentNode===t.current.parentNode?r:ey(e):eJ,[e])}(A?null!=eE?eE:ed:null),eO=function(e,t){void 0===t&&(t=ex);let[r]=e,[n,l]=(e0(r?O(r):null),(0,m.useState)(e1));function a(){l(()=>e.length?e.map(e=>new eR(t(e),e)):e1)}let i=eH({callback:a});return W(()=>{null==i||i.disconnect(),a(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),n}(ez),eF=tl(j,{transform:{x:T.x-eM.x,y:T.y-eM.y,scaleX:1,scaleY:1},activatorEvent:Q,active:B,activeNodeRect:ev,containerNodeRect:ew,draggingNodeRect:eP,over:ej.current.over,overlayNodeRect:eS.rect,scrollableAncestors:ez,scrollableAncestorRects:eO,windowRect:eT}),eL=eu?K(eu,T):null,eI=function(e){let[t,r]=(0,m.useState)(null);return(0,m.useRef)(e),(0,m.useCallback)(e=>{let t=(e.target,null);t&&r(e=>e?(e.set(t,eD(t)),new Map(e)):null)},[]),(0,m.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>K(e,t),ec):eN(e):ec,[e,t])}(ez),eB=eG(eI),eW=eG(eI,[ev]),e$=K(eF,eB),eV=eP?ef(eP,eF):null,eq=B&&eV?b({active:B,collisionRect:eV,droppableRects:ea,droppableContainers:er,pointerCoordinates:eL}):null,eU=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(eq,0),[eK,e5]=(0,m.useState)(null),e9=(s=ek?eF:K(eF,eW),o=null!=(i=null==eK?void 0:eK.rect)?i:null,{...s,scaleX:o&&ev?o.width/ev.width:1,scaleY:o&&ev?o.height/ev.height:1}),e6=(0,m.useRef)(null),ti=(0,m.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==$.current)return;let a=k.get($.current);if(!a)return;let i=e.nativeEvent,s=new r({active:$.current,activeNode:a,event:i,options:n,context:ej,onAbort(e){if(!k.get(e))return;let{onDragAbort:t}=ee.current,r={id:e};null==t||t(r),N({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!k.get(e))return;let{onDragPending:l}=ee.current,a={id:e,constraint:t,initialCoordinates:r,offset:n};null==l||l(a),N({type:"onDragPending",event:a})},onStart(e){let t=$.current;if(null==t)return;let r=k.get(t);if(!r)return;let{onDragStart:n}=ee.current,a={activatorEvent:i,active:{id:t,data:r.data,rect:I}};(0,M.unstable_batchedUpdates)(()=>{null==n||n(a),R(p.Initializing),_({type:l.DragStart,initialCoordinates:e,active:t}),N({type:"onDragStart",event:a}),H(e6.current),J(i)})},onMove(e){_({type:l.DragMove,coordinates:e})},onEnd:o(l.DragEnd),onCancel:o(l.DragCancel)});function o(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=ej.current,s=null;if(t&&a){let{cancelDrop:o}=ee.current;s={activatorEvent:i,active:t,collisions:r,delta:a,over:n},e===l.DragEnd&&"function"==typeof o&&await Promise.resolve(o(s))&&(e=l.DragCancel)}$.current=null,(0,M.unstable_batchedUpdates)(()=>{_({type:e}),R(p.Uninitialized),e5(null),H(null),J(null),e6.current=null;let t=e===l.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=ee.current[t];null==e||e(s),N({type:t,event:s})}})}}e6.current=s},[k]),ts=(0,m.useCallback)((e,t)=>(r,n)=>{let l=r.nativeEvent,a=k.get(n);null!==$.current||!a||l.dndKit||l.defaultPrevented||!0!==e(r,t.options,{active:a})||(l.dndKit={capturedBy:t.sensor},$.current=n,ti(r,t))},[k,ti]),to=(0,m.useMemo)(()=>y.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:ts(e.handler,t)}))]},[]),[y,ts]);(0,m.useEffect)(()=>{},y.map(e=>{let{sensor:t}=e;return t})),W(()=>{ev&&S===p.Initializing&&R(p.Initialized)},[ev,S]),(0,m.useEffect)(()=>{let{onDragMove:e}=ee.current,{active:t,activatorEvent:r,collisions:n,over:l}=ej.current;if(!t||!r)return;let a={active:t,activatorEvent:r,collisions:n,delta:{x:e$.x,y:e$.y},over:l};(0,M.unstable_batchedUpdates)(()=>{null==e||e(a),N({type:"onDragMove",event:a})})},[e$.x,e$.y]),(0,m.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:l}=ej.current;if(!e||null==$.current||!t||!l)return;let{onDragOver:a}=ee.current,i=n.get(eU),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:l.x,y:l.y},over:s};(0,M.unstable_batchedUpdates)(()=>{e5(s),null==a||a(o),N({type:"onDragOver",event:o})})},[eU]),W(()=>{ej.current={activatorEvent:Q,active:B,activeNode:ed,collisionRect:eV,collisions:eq,droppableRects:ea,draggableNodes:k,draggingNode:eA,draggingNodeRect:eP,droppableContainers:z,over:eK,scrollableAncestors:ez,scrollAdjustedTranslate:e$},I.current={initial:eP,translated:eV}},[B,ed,eq,eV,k,eA,eP,ea,z,eK,ez,e$]),function(e){let{acceleration:t,activator:r=d.Pointer,canScroll:n,draggingRect:l,enabled:i,interval:s=5,order:o=c.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:p,delta:f,threshold:g}=e,x=function(e){let{delta:t,disabled:r}=e,n=X(t);return q(e=>{if(r||!n||!e)return eX;let l={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[a.Backward]:e.x[a.Backward]||-1===l.x,[a.Forward]:e.x[a.Forward]||1===l.x},y:{[a.Backward]:e.y[a.Backward]||-1===l.y,[a.Forward]:e.y[a.Forward]||1===l.y}}},[r,t,n])}({delta:f,disabled:!i}),[v,y]=function(){let e=(0,m.useRef)(null);return[(0,m.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,m.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),b=(0,m.useRef)({x:0,y:0}),w=(0,m.useRef)({x:0,y:0}),j=(0,m.useMemo)(()=>{switch(r){case d.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case d.DraggableRect:return l}},[r,l,u]),D=(0,m.useRef)(null),C=(0,m.useCallback)(()=>{let e=D.current;if(!e)return;let t=b.current.x*w.current.x,r=b.current.y*w.current.y;e.scrollBy(t,r)},[]),_=(0,m.useMemo)(()=>o===c.TreeOrder?[...h].reverse():h,[o,h]);(0,m.useEffect)(()=>{if(!i||!h.length||!j){y();return}for(let e of _){if((null==n?void 0:n(e))===!1)continue;let r=p[h.indexOf(e)];if(!r)continue;let{direction:l,speed:i}=function(e,t,r,n,l){let{top:i,left:s,right:o,bottom:d}=r;void 0===n&&(n=10),void 0===l&&(l=e_);let{isTop:c,isBottom:u,isLeft:h,isRight:p}=eC(e),f={x:0,y:0},m={x:0,y:0},g={height:t.height*l.y,width:t.width*l.x};return!c&&i<=t.top+g.height?(f.y=a.Backward,m.y=n*Math.abs((t.top+g.height-i)/g.height)):!u&&d>=t.bottom-g.height&&(f.y=a.Forward,m.y=n*Math.abs((t.bottom-g.height-d)/g.height)),!p&&o>=t.right-g.width?(f.x=a.Forward,m.x=n*Math.abs((t.right-g.width-o)/g.width)):!h&&s<=t.left+g.width&&(f.x=a.Backward,m.x=n*Math.abs((t.left+g.width-s)/g.width)),{direction:f,speed:m}}(e,r,j,t,g);for(let e of["x","y"])x[e][l[e]]||(i[e]=0,l[e]=0);if(i.x>0||i.y>0){y(),D.current=e,v(C,s),b.current=i,w.current=l;return}}b.current={x:0,y:0},w.current={x:0,y:0},y()},[t,C,n,y,i,s,JSON.stringify(j),JSON.stringify(x),v,h,_,p,JSON.stringify(g)])}({...em,delta:T,draggingRect:eV,pointerCoordinates:eL,scrollableAncestors:ez,scrollableAncestorRects:eO});let td=(0,m.useMemo)(()=>({active:B,activeNode:ed,activeNodeRect:ev,activatorEvent:Q,collisions:eq,containerNodeRect:ew,dragOverlay:eS,draggableNodes:k,droppableContainers:z,droppableRects:ea,over:eK,measureDroppableContainers:ei,scrollableAncestors:ez,scrollableAncestorRects:eO,measuringConfiguration:en,measuringScheduled:eo,windowRect:eT}),[B,ed,ev,Q,eq,ew,eS,k,z,ea,eK,ei,ez,eO,en,eo,eT]),tc=(0,m.useMemo)(()=>({activatorEvent:Q,activators:to,active:B,activeNodeRect:ev,ariaDescribedById:{draggable:et},dispatch:_,draggableNodes:k,over:eK,measureDroppableContainers:ei}),[Q,to,B,ev,_,et,k,eK,ei]);return g().createElement(el.Provider,{value:E},g().createElement(e7.Provider,{value:tc},g().createElement(te.Provider,{value:td},g().createElement(ta.Provider,{value:e9},v)),g().createElement(tn,{disabled:(null==f?void 0:f.restoreFocus)===!1})),g().createElement(es,{...f,hiddenTextDescribedById:et}))}),ts=(0,m.createContext)(null),to="button";function td(){return(0,m.useContext)(te)}let tc={timeout:25};function tu(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:l}=e;Z("Droppable");let{active:a,dispatch:i,over:s,measureDroppableContainers:o}=(0,m.useContext)(e7);(0,m.useRef)({disabled:r});let d=(0,m.useRef)(!1),c=(0,m.useRef)(null),u=(0,m.useRef)(null),{disabled:h,updateMeasurementsFor:p,timeout:f}={...tc,...l},g=V(null!=p?p:n),x=eH({callback:(0,m.useCallback)(()=>{if(!d.current){d.current=!0;return}null!=u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{o(Array.isArray(g.current)?g.current:[g.current]),u.current=null},f)},[f]),disabled:h||!a}),[v,y]=U((0,m.useCallback)((e,t)=>{x&&(t&&(x.unobserve(t),d.current=!1),e&&x.observe(e))},[x]));return V(t),{active:a,rect:c,isOver:(null==s?void 0:s.id)===n,node:v,over:s,setNodeRef:y}}function th(e){let{animation:t,children:r}=e,[n,l]=(0,m.useState)(null),[a,i]=(0,m.useState)(null),s=X(r);return r||n||!s||l(s),W(()=>{if(!a)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;if(null==e||null==r){l(null);return}Promise.resolve(t(r,a)).then(()=>{l(null)})},[t,n,a]),g().createElement(g().Fragment,null,r,n?(0,m.cloneElement)(n,{ref:i}):null)}let tp={x:0,y:0,scaleX:1,scaleY:1};function tf(e){let{children:t}=e;return g().createElement(e7.Provider,{value:e6},g().createElement(ta.Provider,{value:tp},t))}let tm={position:"fixed",touchAction:"none"},tg=e=>J(e)?"transform 250ms ease":void 0,tx=(0,m.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:l,children:a,className:i,rect:s,style:o,transform:d,transition:c=tg}=e;if(!s)return null;let u=l?d:{...d,scaleX:1,scaleY:1},h={...tm,width:s.width,height:s.height,top:s.top,left:s.left,transform:ee.Transform.toString(u),transformOrigin:l&&n?function(e,t){let r=G(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,s):void 0,transition:"function"==typeof c?c(n):c,...o};return g().createElement(r,{className:i,style:h,ref:t},a)}),tv={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:ee.Transform.toString(t)},{transform:ee.Transform.toString(r)}]},sideEffects:(n={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:r}=e,l={},{styles:a,className:i}=n;if(null!=a&&a.active)for(let[e,r]of Object.entries(a.active))void 0!==r&&(l[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,r));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=i&&i.active&&t.node.classList.add(i.active),null!=i&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(let[e,r]of Object.entries(l))t.node.style.setProperty(e,r);null!=i&&i.active&&t.node.classList.remove(i.active)}})},ty=0,tb=g().memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:l,transition:a,modifiers:i,wrapperElement:s="div",className:o,zIndex:d=999}=e,{activatorEvent:c,active:u,activeNodeRect:h,containerNodeRect:p,draggableNodes:f,droppableContainers:x,dragOverlay:v,over:y,measuringConfiguration:b,scrollableAncestors:w,scrollableAncestorRects:j,windowRect:D}=td(),C=(0,m.useContext)(ta),_=function(e){return(0,m.useMemo)(()=>{if(null!=e)return++ty},[e])}(null==u?void 0:u.id),N=tl(i,{activatorEvent:c,active:u,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:y,overlayNodeRect:v.rect,scrollableAncestors:w,scrollableAncestorRects:j,transform:C,windowRect:D}),E=eZ(h),S=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:l}=e;return $((e,a)=>{if(null===t)return;let i=r.get(e);if(!i)return;let s=i.node.current;if(!s)return;let o=e2(a);if(!o)return;let{transform:d}=O(a).getComputedStyle(a),c=em(d);if(!c)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:l}={...tv,...e};return e=>{let{active:a,dragOverlay:i,transform:s,...o}=e;if(!t)return;let d={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},c={scaleX:1!==s.scaleX?a.rect.width*s.scaleX/i.rect.width:1,scaleY:1!==s.scaleY?a.rect.height*s.scaleY/i.rect.height:1},u={x:s.x-d.x,y:s.y-d.y,...c},h=l({...o,active:a,dragOverlay:i,transform:{initial:s,final:u}}),[p]=h,f=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(f))return;let m=null==n?void 0:n({active:a,dragOverlay:i,...o}),g=i.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return eE(s,l.draggable.measure),u({active:{id:e,data:i.data,node:s,rect:l.draggable.measure(s)},draggableNodes:r,dragOverlay:{node:a,rect:l.dragOverlay.measure(o)},droppableContainers:n,measuringConfiguration:l,transform:c})})}({config:n,draggableNodes:f,droppableContainers:x,measuringConfiguration:b}),R=E?v.setRef:void 0;return g().createElement(tf,null,g().createElement(th,{animation:S},u&&_?g().createElement(tx,{key:_,id:u.id,ref:R,as:s,activatorEvent:c,adjustScale:t,className:o,transition:a,rect:E,style:{zIndex:d,...l},transform:N},r):null))});function tw(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function tj(e){return null!==e&&e>=0}let tD=e=>{let{rects:t,activeIndex:r,overIndex:n,index:l}=e,a=tw(t,n,r),i=t[l],s=a[l];return s&&i?{x:s.left-i.left,y:s.top-i.top,scaleX:s.width/i.width,scaleY:s.height/i.height}:null},tC={scaleX:1,scaleY:1},t_=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:l,rects:a,overIndex:i}=e,s=null!=(t=a[r])?t:n;if(!s)return null;if(l===r){let e=a[i];return e?{x:0,y:r<i?e.top+e.height-(s.top+s.height):e.top-s.top,...tC}:null}let o=function(e,t,r){let n=e[t],l=e[t-1],a=e[t+1];return n?r<t?l?n.top-(l.top+l.height):a?a.top-(n.top+n.height):0:a?a.top-(n.top+n.height):l?n.top-(l.top+l.height):0:0}(a,l,r);return l>r&&l<=i?{x:0,y:-s.height-o,...tC}:l<r&&l>=i?{x:0,y:s.height+o,...tC}:{x:0,y:0,...tC}},tN="Sortable",tE=g().createContext({activeIndex:-1,containerId:tN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tD,disabled:{draggable:!1,droppable:!1}});function tS(e){let{children:t,id:r,items:n,strategy:l=tD,disabled:a=!1}=e,{active:i,dragOverlay:s,droppableRects:o,over:d,measureDroppableContainers:c}=td(),u=Z(tN,r),h=null!==s.rect,p=(0,m.useMemo)(()=>n.map(e=>"object"==typeof e&&"id"in e?e.id:e),[n]),f=null!=i,x=i?p.indexOf(i.id):-1,v=d?p.indexOf(d.id):-1,y=(0,m.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(p,y.current),w=-1!==v&&-1===x||b,j="boolean"==typeof a?{draggable:a,droppable:a}:a;W(()=>{b&&f&&c(p)},[b,p,f,c]);let D=(0,m.useMemo)(()=>({activeIndex:x,containerId:u,disabled:j,disableTransforms:w,items:p,overIndex:v,useDragOverlay:h,sortedRects:p.reduce((e,t,r)=>{let n=o.get(t);return n&&(e[r]=n),e},Array(p.length)),strategy:l}),[x,u,j.draggable,j.droppable,w,p,v,o,h,l]);return g().createElement(tE.Provider,{value:D},t)}let tR=e=>{let{id:t,items:r,activeIndex:n,overIndex:l}=e;return tw(r,n,l).indexOf(t)},tA=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:l,items:a,newIndex:i,previousItems:s,previousContainerId:o,transition:d}=e;return!!d&&!!n&&(s===a||l!==i)&&(!!r||i!==l&&t===o)},tP={duration:200,easing:"ease"},tk="transform",tM=ee.Transition.toString({property:tk,duration:0,easing:"linear"}),tT={roleDescription:"sortable"};s.Down,s.Right,s.Up,s.Left;var tz=r(5578);let tO=(0,tz.Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var tF=r(4389),tL=r(8091),tI=r(3594),tB=r(8443),tW=r(9752),t$=r(143);function tV({lead:e,onClick:t,onDelete:r}){let{attributes:n,listeners:l,setNodeRef:a,transform:i,transition:s,isDragging:o}=function(e){var t,r;let{animateLayoutChanges:n=tA,attributes:l,disabled:a,data:i,getNewIndex:s=tR,id:o,strategy:d,resizeObserverConfig:c,transition:u=tP}=e,{items:h,containerId:p,activeIndex:f,disabled:g,disableTransforms:x,sortedRects:v,overIndex:y,useDragOverlay:b,strategy:w}=(0,m.useContext)(tE),j="boolean"==typeof a?{draggable:a,droppable:!1}:{draggable:null!=(t=null==a?void 0:a.draggable)?t:g.draggable,droppable:null!=(r=null==a?void 0:a.droppable)?r:g.droppable},D=h.indexOf(o),C=(0,m.useMemo)(()=>({sortable:{containerId:p,index:D,items:h},...i}),[p,i,D,h]),_=(0,m.useMemo)(()=>h.slice(h.indexOf(o)),[h,o]),{rect:N,node:E,isOver:S,setNodeRef:R}=tu({id:o,data:C,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:A,activatorEvent:P,activeNodeRect:k,attributes:M,setNodeRef:T,listeners:z,isDragging:O,over:F,setActivatorNodeRef:L,transform:I}=function(e){let{id:t,data:r,disabled:n=!1,attributes:l}=e,a=Z("Draggable"),{activators:i,activatorEvent:s,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:h}=(0,m.useContext)(e7),{role:p=to,roleDescription:f="draggable",tabIndex:g=0}=null!=l?l:{},x=(null==o?void 0:o.id)===t,v=(0,m.useContext)(x?ta:ts),[y,b]=U(),[w,j]=U(),D=(0,m.useMemo)(()=>i.reduce((e,r)=>{let{eventName:n,handler:l}=r;return e[n]=e=>{l(e,t)},e},{}),[i,t]),C=V(r);return W(()=>(u.set(t,{id:t,key:a,node:y,activatorNode:w,data:C}),()=>{let e=u.get(t);e&&e.key===a&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:d,attributes:(0,m.useMemo)(()=>({role:p,tabIndex:g,"aria-disabled":n,"aria-pressed":!!x&&p===to||void 0,"aria-roledescription":f,"aria-describedby":c.draggable}),[n,p,g,x,f,c.draggable]),isDragging:x,listeners:n?void 0:D,node:y,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:v}}({id:o,data:C,attributes:{...tT,...l},disabled:j.draggable}),B=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,m.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(R,T),$=!!A,q=$&&!x&&tj(f)&&tj(y),X=!b&&O,Y=X&&q?I:null,H=q?null!=Y?Y:(null!=d?d:w)({rects:v,activeNodeRect:k,activeIndex:f,overIndex:y,index:D}):null,K=tj(f)&&tj(y)?s({id:o,items:h,activeIndex:f,overIndex:y}):D,Q=null==A?void 0:A.id,G=(0,m.useRef)({activeId:Q,items:h,newIndex:K,containerId:p}),et=h!==G.current.items,er=n({active:A,containerId:p,isDragging:O,isSorting:$,id:o,index:D,items:h,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:u,wasDragging:null!=G.current.activeId}),en=function(e){let{disabled:t,index:r,node:n,rect:l}=e,[a,i]=(0,m.useState)(null),s=(0,m.useRef)(r);return W(()=>{if(!t&&r!==s.current&&n.current){let e=l.current;if(e){let t=ex(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&i(r)}}r!==s.current&&(s.current=r)},[t,r,n,l]),a}({disabled:!er,index:D,node:E,rect:N});return{active:A,activeIndex:f,attributes:M,data:C,rect:N,index:D,newIndex:K,items:h,isOver:S,isSorting:$,isDragging:O,listeners:z,node:E,overIndex:y,over:F,setNodeRef:B,setActivatorNodeRef:L,setDroppableNodeRef:R,setDraggableNodeRef:T,transform:null!=en?en:H,transition:en||et&&G.current.newIndex===D?tM:(!X||J(P))&&u&&($||er)?ee.Transition.toString({...u,property:tk}):void 0}}({id:`lead-${e.id}`}),d={transform:ee.Transform.toString(i),transition:s},c=e.lead_tags?.map(e=>e.tag)||[],u=e.profiles;return f.jsx(tW.Zb,{ref:a,style:d,...n,...l,className:`cursor-grab active:cursor-grabbing mb-2 ${o?"opacity-50 shadow-lg":""}`,onClick:t,children:(0,f.jsxs)(tW.aY,{className:"p-3",children:[f.jsx("p",{className:"font-medium text-sm line-clamp-2",children:e.title}),e.email&&f.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:e.email}),c.length>0&&(0,f.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[c.slice(0,3).map(e=>f.jsx(tB.C,{variant:"secondary",className:"text-xs",children:e},e)),c.length>3&&(0,f.jsxs)(tB.C,{variant:"outline",className:"text-xs",children:["+",c.length-3]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between mt-2 gap-2",children:[f.jsx("span",{className:"text-xs text-muted-foreground truncate",children:e.source}),(0,f.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0",children:[u&&(0,f.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground truncate",title:u.name||u.email,children:[f.jsx(tI.qE,{className:"size-5 shrink-0",children:f.jsx(tI.Q5,{className:"text-[10px]",children:u.name?.charAt(0)||u.email?.charAt(0)||"?"})}),f.jsx("span",{className:"truncate",children:u.name||u.email||"â€”"})]}),r&&(0,f.jsxs)(t$.h_,{children:[f.jsx(t$.$F,{asChild:!0,children:f.jsx(y.z,{variant:"ghost",size:"icon",className:"size-6",onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:f.jsx(tO,{className:"size-3"})})}),f.jsx(t$.AW,{align:"end",onClick:e=>e.stopPropagation(),children:(0,f.jsxs)(t$.Xi,{className:"text-destructive",onClick:t=>{t.stopPropagation(),confirm("Excluir este lead?")&&r(e.id)},children:[f.jsx(tL.Z,{className:"mr-2 size-3"}),"Excluir"]})})]})]})]})]})})}function tq({open:e,onOpenChange:t,stageName:r,onSave:n}){let[l,a]=(0,m.useState)(r),[i,s]=(0,m.useState)(!1),o=async e=>{if(e.preventDefault(),l.trim()){s(!0);try{await n(l.trim()),t(!1)}finally{s(!1)}}};return f.jsx(D.Vq,{open:e,onOpenChange:t,children:(0,f.jsxs)(D.cZ,{children:[(0,f.jsxs)(D.fK,{children:[f.jsx(D.$N,{children:"Renomear est\xe1gio"}),f.jsx(D.Be,{children:"Altere o nome do est\xe1gio"})]}),(0,f.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Nome"}),f.jsx(C.I,{value:l,onChange:e=>a(e.target.value),placeholder:"Ex: Qualifica\xe7\xe3o",disabled:i})]}),(0,f.jsxs)(D.cN,{children:[f.jsx(y.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),f.jsx(y.z,{type:"submit",disabled:i||!l.trim(),children:"Salvar"})]})]})]})})}function tU({stage:e,onLeadClick:t,onLeadCreated:r,onLeadDelete:n,pipelineId:l,onEditStage:a,onDeleteStage:i,canEditStages:s=!1}){let{setNodeRef:o,isOver:d}=tu({id:`stage-${e.id}`}),[c,u]=(0,m.useState)(!1),[h,p]=(0,m.useState)(!1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{ref:o,className:`flex w-72 shrink-0 flex-col rounded-lg border bg-muted/30 transition-colors ${d?"border-primary/50 bg-muted/50":""}`,children:[(0,f.jsxs)("div",{className:"flex items-center justify-between gap-1 border-b p-3",children:[f.jsx("h3",{className:"truncate font-semibold",children:e.name}),(0,f.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[f.jsx("span",{className:"text-muted-foreground text-sm",children:e.leads.length}),s&&(a||i)&&(0,f.jsxs)(t$.h_,{children:[f.jsx(t$.$F,{asChild:!0,children:f.jsx(y.z,{variant:"ghost",size:"icon",className:"size-7",children:f.jsx(tO,{className:"size-4"})})}),(0,f.jsxs)(t$.AW,{align:"end",children:[a&&(0,f.jsxs)(t$.Xi,{onClick:()=>p(!0),children:[f.jsx(tF.Z,{className:"mr-2 size-4"}),"Renomear"]}),i&&(0,f.jsxs)(t$.Xi,{onClick:()=>i(e.id),className:"text-destructive",children:[f.jsx(tL.Z,{className:"mr-2 size-4"}),"Excluir est\xe1gio"]})]})]})]})]}),(0,f.jsxs)("div",{className:"flex min-h-[200px] flex-1 flex-col overflow-y-auto p-2",children:[f.jsx(tS,{items:e.leads.map(e=>`lead-${e.id}`),strategy:t_,children:e.leads.map(e=>f.jsx(tV,{lead:e,onClick:()=>t(e.id),onDelete:n},e.id))}),(0,f.jsxs)(y.z,{variant:"ghost",size:"sm",className:"mt-2 w-full justify-start text-muted-foreground",onClick:()=>u(!0),children:[f.jsx(v.Z,{className:"mr-2 size-4"}),"Adicionar lead"]})]})]}),f.jsx(P,{open:c,onOpenChange:u,pipelineId:l,stageId:e.id,stageName:e.name,position:e.leads.length,onLeadCreated:r}),a&&f.jsx(tq,{open:h,onOpenChange:p,stageName:e.name,onSave:async t=>{await a(e.id,t),p(!1)}})]})}function tX({lead:e}){let t=e.lead_tags?.map(e=>e.tag)||[],r=e.profiles;return f.jsx(tW.Zb,{className:"cursor-grabbing shadow-xl ring-2 ring-primary/20 rotate-2 scale-105",children:(0,f.jsxs)(tW.aY,{className:"p-3",children:[f.jsx("p",{className:"font-medium text-sm line-clamp-2",children:e.title}),e.email&&f.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:e.email}),t.length>0&&(0,f.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.slice(0,3).map(e=>f.jsx(tB.C,{variant:"secondary",className:"text-xs",children:e},e)),t.length>3&&(0,f.jsxs)(tB.C,{variant:"outline",className:"text-xs",children:["+",t.length-3]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between mt-2 gap-2",children:[f.jsx("span",{className:"text-xs text-muted-foreground truncate",children:e.source}),r&&(0,f.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground truncate",title:r.name||r.email,children:[f.jsx(tI.qE,{className:"size-5 shrink-0",children:f.jsx(tI.Q5,{className:"text-[10px]",children:r.name?.charAt(0)||r.email?.charAt(0)||"?"})}),f.jsx("span",{className:"truncate",children:r.name||r.email||"â€”"})]})]})]})})}var tY=r(6066),tZ=r(2561),tH=r(5478),tK=r(9815),tQ=r(8051),tJ=Symbol("radix.slottable");function tG(e){return m.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===tJ}var t0=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=m.forwardRef((e,t)=>{let{children:r,...n}=e;if(m.isValidElement(r)){let e,l;let a=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,i=function(e,t){let r={...t};for(let n in t){let l=e[n],a=t[n];/^on[A-Z]/.test(n)?l&&a?r[n]=(...e)=>{let t=a(...e);return l(...e),t}:l&&(r[n]=l):"style"===n?r[n]={...l,...a}:"className"===n&&(r[n]=[l,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==m.Fragment&&(i.ref=t?(0,tQ.F)(t,a):a),m.cloneElement(r,i)}return m.Children.count(r)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=m.forwardRef((e,r)=>{let{children:n,...l}=e,a=m.Children.toArray(n),i=a.find(tG);if(i){let e=i.props.children,n=a.map(t=>t!==i?t:m.Children.count(e)>1?m.Children.only(null):m.isValidElement(e)?e.props.children:null);return(0,f.jsx)(t,{...l,ref:r,children:m.isValidElement(e)?m.cloneElement(e,void 0,n):null})}return(0,f.jsx)(t,{...l,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),n=m.forwardRef((e,n)=>{let{asChild:l,...a}=e,i=l?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,f.jsx)(i,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),t1=r(7124),t2=r(2067),t3=r(8957),t8="Tabs",[t4,t5]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>m.createContext(e));return function(r){let n=r?.[e]||t;return m.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let l=m.createContext(n),a=r.length;r=[...r,n];let i=t=>{let{scope:r,children:n,...i}=t,s=r?.[e]?.[a]||l,o=m.useMemo(()=>i,Object.values(i));return(0,f.jsx)(s.Provider,{value:o,children:n})};return i.displayName=t+"Provider",[i,function(r,i){let s=i?.[e]?.[a]||l,o=m.useContext(s);if(o)return o;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let l=r(e)[`__scope${n}`];return{...t,...l}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}(t8,[tH.Pc]),t9=(0,tH.Pc)(),[t6,t7]=t4(t8),re=m.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:l,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:o="automatic",...d}=e,c=(0,t1.gm)(s),[u,h]=(0,t2.T)({prop:n,onChange:l,defaultProp:a??"",caller:t8});return(0,f.jsx)(t6,{scope:r,baseId:(0,t3.M)(),value:u,onValueChange:h,orientation:i,dir:c,activationMode:o,children:(0,f.jsx)(t0.div,{dir:c,"data-orientation":i,...d,ref:t})})});re.displayName=t8;var rt="TabsList",rr=m.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...l}=e,a=t7(rt,r),i=t9(r);return(0,f.jsx)(tH.fC,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:n,children:(0,f.jsx)(t0.div,{role:"tablist","aria-orientation":a.orientation,...l,ref:t})})});rr.displayName=rt;var rn="TabsTrigger",rl=m.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:l=!1,...a}=e,i=t7(rn,r),s=t9(r),o=rs(i.baseId,n),d=ro(i.baseId,n),c=n===i.value;return(0,f.jsx)(tH.ck,{asChild:!0,...s,focusable:!l,active:c,children:(0,f.jsx)(t0.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":d,"data-state":c?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:o,...a,ref:t,onMouseDown:(0,tZ.Mj)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)}),onKeyDown:(0,tZ.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)}),onFocus:(0,tZ.Mj)(e.onFocus,()=>{let e="manual"!==i.activationMode;c||l||!e||i.onValueChange(n)})})})});rl.displayName=rn;var ra="TabsContent",ri=m.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:l,children:a,...i}=e,s=t7(ra,r),o=rs(s.baseId,n),d=ro(s.baseId,n),c=n===s.value,u=m.useRef(c);return m.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(tK.z,{present:l||c,children:({present:r})=>(0,f.jsx)(t0.div,{"data-state":c?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":o,hidden:!r,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:r&&a})})});function rs(e,t){return`${e}-trigger-${t}`}function ro(e,t){return`${e}-content-${t}`}ri.displayName=ra;let rd=m.forwardRef(({className:e,...t},r)=>f.jsx(rr,{ref:r,className:(0,R.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));rd.displayName=rr.displayName;let rc=m.forwardRef(({className:e,...t},r)=>f.jsx(rl,{ref:r,className:(0,R.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));rc.displayName=rl.displayName;let ru=m.forwardRef(({className:e,...t},r)=>f.jsx(ri,{ref:r,className:(0,R.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ru.displayName=ri.displayName;var rh=r(8227),rp=Symbol("radix.slottable");function rf(e){return m.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===rp}var rm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=m.forwardRef((e,t)=>{let{children:r,...n}=e;if(m.isValidElement(r)){let e,l;let a=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,i=function(e,t){let r={...t};for(let n in t){let l=e[n],a=t[n];/^on[A-Z]/.test(n)?l&&a?r[n]=(...e)=>{let t=a(...e);return l(...e),t}:l&&(r[n]=l):"style"===n?r[n]={...l,...a}:"className"===n&&(r[n]=[l,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==m.Fragment&&(i.ref=t?(0,tQ.F)(t,a):a),m.cloneElement(r,i)}return m.Children.count(r)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=m.forwardRef((e,r)=>{let{children:n,...l}=e,a=m.Children.toArray(n),i=a.find(rf);if(i){let e=i.props.children,n=a.map(t=>t!==i?t:m.Children.count(e)>1?m.Children.only(null):m.isValidElement(e)?e.props.children:null);return(0,f.jsx)(t,{...l,ref:r,children:m.isValidElement(e)?m.cloneElement(e,void 0,n):null})}return(0,f.jsx)(t,{...l,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),n=m.forwardRef((e,n)=>{let{asChild:l,...a}=e,i=l?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,f.jsx)(i,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),rg=r(5049),rx=r(5819),rv=r(7125),ry="ScrollArea",[rb,rw]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>m.createContext(e));return function(r){let n=r?.[e]||t;return m.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let l=m.createContext(n),a=r.length;r=[...r,n];let i=t=>{let{scope:r,children:n,...i}=t,s=r?.[e]?.[a]||l,o=m.useMemo(()=>i,Object.values(i));return(0,f.jsx)(s.Provider,{value:o,children:n})};return i.displayName=t+"Provider",[i,function(r,i){let s=i?.[e]?.[a]||l,o=m.useContext(s);if(o)return o;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let l=r(e)[`__scope${n}`];return{...t,...l}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}(ry),[rj,rD]=rb(ry),rC=m.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:n="hover",dir:l,scrollHideDelay:a=600,...i}=e,[s,o]=m.useState(null),[d,c]=m.useState(null),[u,h]=m.useState(null),[p,g]=m.useState(null),[x,v]=m.useState(null),[y,b]=m.useState(0),[w,j]=m.useState(0),[D,C]=m.useState(!1),[_,N]=m.useState(!1),E=(0,tQ.e)(t,e=>o(e)),S=(0,t1.gm)(l);return(0,f.jsx)(rj,{scope:r,type:n,dir:S,scrollHideDelay:a,scrollArea:s,viewport:d,onViewportChange:c,content:u,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:D,onScrollbarXEnabledChange:C,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:_,onScrollbarYEnabledChange:N,onCornerWidthChange:b,onCornerHeightChange:j,children:(0,f.jsx)(rm.div,{dir:S,...i,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});rC.displayName=ry;var r_="ScrollAreaViewport",rN=m.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:n,nonce:l,...a}=e,i=rD(r_,r),s=m.useRef(null),o=(0,tQ.e)(t,s,i.onViewportChange);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,f.jsx)(rm.div,{"data-radix-scroll-area-viewport":"",...a,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,f.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});rN.displayName=r_;var rE="ScrollAreaScrollbar",rS=m.forwardRef((e,t)=>{let{forceMount:r,...n}=e,l=rD(rE,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=l,s="horizontal"===e.orientation;return m.useEffect(()=>(s?a(!0):i(!0),()=>{s?a(!1):i(!1)}),[s,a,i]),"hover"===l.type?(0,f.jsx)(rR,{...n,ref:t,forceMount:r}):"scroll"===l.type?(0,f.jsx)(rA,{...n,ref:t,forceMount:r}):"auto"===l.type?(0,f.jsx)(rP,{...n,ref:t,forceMount:r}):"always"===l.type?(0,f.jsx)(rk,{...n,ref:t}):null});rS.displayName=rE;var rR=m.forwardRef((e,t)=>{let{forceMount:r,...n}=e,l=rD(rE,e.__scopeScrollArea),[a,i]=m.useState(!1);return m.useEffect(()=>{let e=l.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),i(!0)},n=()=>{t=window.setTimeout(()=>i(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[l.scrollArea,l.scrollHideDelay]),(0,f.jsx)(tK.z,{present:r||a,children:(0,f.jsx)(rP,{"data-state":a?"visible":"hidden",...n,ref:t})})}),rA=m.forwardRef((e,t)=>{var r,n;let{forceMount:l,...a}=e,i=rD(rE,e.__scopeScrollArea),s="horizontal"===e.orientation,o=rK(()=>c("SCROLL_END"),100),[d,c]=(r="hidden",n={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},m.useReducer((e,t)=>n[e][t]??e,r));return m.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,c]),m.useEffect(()=>{let e=i.viewport,t=s?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(c("SCROLL"),o()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[i.viewport,s,c,o]),(0,f.jsx)(tK.z,{present:l||"hidden"!==d,children:(0,f.jsx)(rk,{"data-state":"hidden"===d?"hidden":"visible",...a,ref:t,onPointerEnter:(0,tZ.Mj)(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:(0,tZ.Mj)(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),rP=m.forwardRef((e,t)=>{let r=rD(rE,e.__scopeScrollArea),{forceMount:n,...l}=e,[a,i]=m.useState(!1),s="horizontal"===e.orientation,o=rK(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;i(s?e:t)}},10);return rQ(r.viewport,o),rQ(r.content,o),(0,f.jsx)(tK.z,{present:n||a,children:(0,f.jsx)(rk,{"data-state":a?"visible":"hidden",...l,ref:t})})}),rk=m.forwardRef((e,t)=>{let{orientation:r="vertical",...n}=e,l=rD(rE,e.__scopeScrollArea),a=m.useRef(null),i=m.useRef(0),[s,o]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=rU(s.viewport,s.content),c={...n,sizes:s,onSizesChange:o,hasThumb:!!(d>0&&d<1),onThumbChange:e=>a.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function u(e,t){return function(e,t,r,n="ltr"){let l=rX(r),a=t||l/2,i=r.scrollbar.paddingStart+a,s=r.scrollbar.size-r.scrollbar.paddingEnd-(l-a),o=r.content-r.viewport;return rZ([i,s],"ltr"===n?[0,o]:[-1*o,0])(e)}(e,i.current,s,t)}return"horizontal"===r?(0,f.jsx)(rM,{...c,ref:t,onThumbPositionChange:()=>{if(l.viewport&&a.current){let e=rY(l.viewport.scrollLeft,s,l.dir);a.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollLeft=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollLeft=u(e,l.dir))}}):"vertical"===r?(0,f.jsx)(rT,{...c,ref:t,onThumbPositionChange:()=>{if(l.viewport&&a.current){let e=rY(l.viewport.scrollTop,s);a.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollTop=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollTop=u(e))}}):null}),rM=m.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...l}=e,a=rD(rE,e.__scopeScrollArea),[i,s]=m.useState(),o=m.useRef(null),d=(0,tQ.e)(t,o,a.onScrollbarXChange);return m.useEffect(()=>{o.current&&s(getComputedStyle(o.current))},[o]),(0,f.jsx)(rF,{"data-orientation":"horizontal",...l,ref:d,sizes:r,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":rX(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(a.viewport){let n=a.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),function(e,t){return e>0&&e<t}(n,r)&&t.preventDefault()}},onResize:()=>{o.current&&a.viewport&&i&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:o.current.clientWidth,paddingStart:rq(i.paddingLeft),paddingEnd:rq(i.paddingRight)}})}})}),rT=m.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...l}=e,a=rD(rE,e.__scopeScrollArea),[i,s]=m.useState(),o=m.useRef(null),d=(0,tQ.e)(t,o,a.onScrollbarYChange);return m.useEffect(()=>{o.current&&s(getComputedStyle(o.current))},[o]),(0,f.jsx)(rF,{"data-orientation":"vertical",...l,ref:d,sizes:r,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":rX(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(a.viewport){let n=a.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),function(e,t){return e>0&&e<t}(n,r)&&t.preventDefault()}},onResize:()=>{o.current&&a.viewport&&i&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:o.current.clientHeight,paddingStart:rq(i.paddingTop),paddingEnd:rq(i.paddingBottom)}})}})}),[rz,rO]=rb(rE),rF=m.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:n,hasThumb:l,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:s,onThumbPositionChange:o,onDragScroll:d,onWheelScroll:c,onResize:u,...h}=e,p=rD(rE,r),[g,x]=m.useState(null),v=(0,tQ.e)(t,e=>x(e)),y=m.useRef(null),b=m.useRef(""),w=p.viewport,j=n.content-n.viewport,D=(0,rg.W)(c),C=(0,rg.W)(o),_=rK(u,10);function N(e){y.current&&d({x:e.clientX-y.current.left,y:e.clientY-y.current.top})}return m.useEffect(()=>{let e=e=>{let t=e.target;g?.contains(t)&&D(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,g,j,D]),m.useEffect(C,[n,C]),rQ(g,_),rQ(p.content,_),(0,f.jsx)(rz,{scope:r,scrollbar:g,hasThumb:l,onThumbChange:(0,rg.W)(a),onThumbPointerUp:(0,rg.W)(i),onThumbPositionChange:C,onThumbPointerDown:(0,rg.W)(s),children:(0,f.jsx)(rm.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:(0,tZ.Mj)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(e))}),onPointerMove:(0,tZ.Mj)(e.onPointerMove,N),onPointerUp:(0,tZ.Mj)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),rL="ScrollAreaThumb",rI=m.forwardRef((e,t)=>{let{forceMount:r,...n}=e,l=rO(rL,e.__scopeScrollArea);return(0,f.jsx)(tK.z,{present:r||l.hasThumb,children:(0,f.jsx)(rB,{ref:t,...n})})}),rB=m.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:n,...l}=e,a=rD(rL,r),i=rO(rL,r),{onThumbPositionChange:s}=i,o=(0,tQ.e)(t,e=>i.onThumbChange(e)),d=m.useRef(void 0),c=rK(()=>{d.current&&(d.current(),d.current=void 0)},100);return m.useEffect(()=>{let e=a.viewport;if(e){let t=()=>{if(c(),!d.current){let t=rH(e,s);d.current=t,s()}};return s(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[a.viewport,c,s]),(0,f.jsx)(rm.div,{"data-state":i.hasThumb?"visible":"hidden",...l,ref:o,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:(0,tZ.Mj)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;i.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,tZ.Mj)(e.onPointerUp,i.onThumbPointerUp)})});rI.displayName=rL;var rW="ScrollAreaCorner",r$=m.forwardRef((e,t)=>{let r=rD(rW,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?(0,f.jsx)(rV,{...e,ref:t}):null});r$.displayName=rW;var rV=m.forwardRef((e,t)=>{let{__scopeScrollArea:r,...n}=e,l=rD(rW,r),[a,i]=m.useState(0),[s,o]=m.useState(0),d=!!(a&&s);return rQ(l.scrollbarX,()=>{let e=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(e),o(e)}),rQ(l.scrollbarY,()=>{let e=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(e),i(e)}),d?(0,f.jsx)(rm.div,{...n,ref:t,style:{width:a,height:s,position:"absolute",right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:0,...e.style}}):null});function rq(e){return e?parseInt(e,10):0}function rU(e,t){let r=e/t;return isNaN(r)?0:r}function rX(e){let t=rU(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function rY(e,t,r="ltr"){let n=rX(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-l,i=t.content-t.viewport,s=(0,rv.u)(e,"ltr"===r?[0,i]:[-1*i,0]);return rZ([0,i],[0,a-n])(s)}function rZ(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var rH=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function l(){let a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,s=r.top!==a.top;(i||s)&&t(),r=a,n=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(n)};function rK(e,t){let r=(0,rg.W)(e),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function rQ(e,t){let r=(0,rg.W)(t);(0,rx.b)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}let rJ=m.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(rC,{ref:n,className:(0,R.cn)("relative overflow-hidden",e),...r,children:[f.jsx(rN,{className:"h-full w-full rounded-[inherit]",children:t}),f.jsx(rG,{}),f.jsx(r$,{})]}));rJ.displayName=rC.displayName;let rG=m.forwardRef(({className:e,orientation:t="vertical",...r},n)=>f.jsx(rS,{ref:n,orientation:t,className:(0,R.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:f.jsx(rI,{className:"relative flex-1 rounded-full bg-border"})}));rG.displayName=rS.displayName;let r0=(0,tz.Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),r1=(0,tz.Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),r2=(0,tz.Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),r3=(0,tz.Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);function r8({open:e,onOpenChange:t,leadId:r,onTaskCreated:n,members:l}){let[a,i]=(0,m.useState)(""),[s,o]=(0,m.useState)(""),[d,c]=(0,m.useState)(""),[u,h]=(0,m.useState)("__none__"),[p,g]=(0,m.useState)(!1),x=async e=>{if(e.preventDefault(),!a.trim()){S.Am.error("T\xedtulo \xe9 obrigat\xf3rio");return}g(!0);try{let{error:e}=await (0,j.e)().from("tasks").insert({lead_id:r,title:a.trim(),description:s.trim()||null,due_date:d||null,assigned_to:u&&"__none__"!==u?u:null,status:"pending"});if(e)throw e;i(""),o(""),c(""),h("__none__"),t(!1),n(),S.Am.success("Tarefa adicionada!")}catch(e){S.Am.error(e instanceof Error?e.message:"Erro ao criar tarefa")}finally{g(!1)}},v=()=>{i(""),o(""),c(""),h("__none__"),t(!1)};return f.jsx(D.Vq,{open:e,onOpenChange:v,children:(0,f.jsxs)(D.cZ,{children:[(0,f.jsxs)(D.fK,{children:[f.jsx(D.$N,{children:"Nova tarefa"}),f.jsx(D.Be,{children:"Adicionar tarefa ao lead"})]}),(0,f.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"task-title",children:"T\xedtulo *"}),f.jsx(C.I,{id:"task-title",placeholder:"Ex: Ligar para o cliente",value:a,onChange:e=>i(e.target.value),required:!0,disabled:p})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"task-desc",children:"Descri\xe7\xe3o"}),f.jsx("textarea",{id:"task-desc",className:"w-full min-h-[60px] rounded-md border px-3 py-2 text-sm",placeholder:"Detalhes da tarefa...",value:s,onChange:e=>o(e.target.value),disabled:p})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{htmlFor:"task-due",children:"Data de vencimento"}),f.jsx(C.I,{id:"task-due",type:"date",value:d,onChange:e=>c(e.target.value),disabled:p})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Atribuir a"}),(0,f.jsxs)(b.Ph,{value:u,onValueChange:h,disabled:p,children:[f.jsx(b.i4,{children:f.jsx(b.ki,{placeholder:"Ningu\xe9m"})}),(0,f.jsxs)(b.Bw,{children:[f.jsx(b.Ql,{value:"__none__",children:"Ningu\xe9m"}),l.map(e=>f.jsx(b.Ql,{value:e.id,children:e.name||e.email},e.id))]})]})]}),(0,f.jsxs)(D.cN,{children:[f.jsx(y.z,{type:"button",variant:"outline",onClick:v,children:"Cancelar"}),f.jsx(y.z,{type:"submit",disabled:p||!a.trim(),children:p?"Adicionando...":"Adicionar"})]})]})]})})}var r4=r(9808);let r5=["Brasil","Portugal","Espanha","Argentina","EUA","Reino Unido","Fran\xe7a","Alemanha","It\xe1lia","M\xe9xico","Chile","Col\xf4mbia","Outro"];function r9({leadId:e,members:t,open:r,onClose:n,onUpdate:l,onDelete:a}){let[i,s]=(0,m.useState)(null),[o,d]=(0,m.useState)([]),[c,u]=(0,m.useState)([]),[h,p]=(0,m.useState)(!0),[g,x]=(0,m.useState)(!1),[w,D]=(0,m.useState)(!1),[N,A]=(0,m.useState)({title:"",email:"",phone:"",phone_country_code:"32",whatsapp:"",website:"",source:"manual",notes:"",assignee_user_id:"",resumo:"",nacionalidade:"",valor:""}),[P,k]=(0,m.useState)(!1),[M,T]=(0,m.useState)(!1),[z,O]=(0,m.useState)(null),[F,L]=(0,m.useState)(""),[I,B]=(0,m.useState)(""),W=(0,j.e)(),$=async()=>{if(confirm("Excluir este lead? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{let{error:t}=await W.from("leads").delete().eq("id",e);if(t)throw t;S.Am.success("Lead exclu\xeddo"),n(),a?.(e),l()}catch(e){S.Am.error((0,R.e)(e,"Erro ao excluir lead"))}},V=async t=>{let r=N.assignee_user_id,n=r&&"__none__"!==r?r:null,a=t&&"__none__"!==t?t:null;if(n!==a){A(e=>({...e,assignee_user_id:t}));try{let{error:t}=await W.from("leads").update({assignee_user_id:a}).eq("id",e);if(t)throw t;await W.from("lead_activities").insert({lead_id:e,type:"assignee_change",payload:{old_assignee_id:n,new_assignee_id:a}}),d(e=>[{type:"assignee_change",payload:{old_assignee_id:n,new_assignee_id:a},created_at:new Date().toISOString()},...e]),S.Am.success("Respons\xe1vel atualizado"),l()}catch(e){A(e=>({...e,assignee_user_id:r})),S.Am.error((0,R.e)(e,"Erro ao alterar respons\xe1vel"))}}},q=async()=>{x(!0);let t=N.assignee_user_id;try{let r=N.phone?`${N.phone_country_code}${N.phone.replace(/\D/g,"")}`:null,n=N.valor?(()=>{let e=parseFloat(String(N.valor).replace(/\./g,"").replace(",","."));return null==e||Number.isNaN(e)?null:e})():null,a=N.assignee_user_id&&"__none__"!==N.assignee_user_id?N.assignee_user_id:null,{error:i}=await W.from("leads").update({title:N.title,email:N.email||null,phone:N.phone||null,phone_country_code:N.phone?N.phone_country_code:null,whatsapp:r,website:N.website||null,source:N.source,notes:N.notes||null,assignee_user_id:a,resumo:N.resumo||null,nacionalidade:N.nacionalidade&&"__none__"!==N.nacionalidade?N.nacionalidade:null,valor:n}).eq("id",e);if(i)throw i;(t||"__none__")!==(a||"__none__")&&await W.from("lead_activities").insert({lead_id:e,type:"assignee_change",payload:{old_assignee_id:t&&"__none__"!==t?t:null,new_assignee_id:a}}),await W.from("lead_activities").insert({lead_id:e,type:"field_edit",payload:{fields:Object.keys(N)}}),S.Am.success("Lead atualizado"),D(!1),l(!0)}catch(e){S.Am.error((0,R.e)(e,"Erro ao salvar"))}finally{x(!1)}},U=async()=>{if(!F.trim())return;let t=F.trim();try{await W.from("lead_activities").insert({lead_id:e,type:"note_added",payload:{note:t}});let r=[N.notes,t].filter(Boolean).join("\n\n"),{error:n}=await W.from("leads").update({notes:r}).eq("id",e);if(n)throw n;A(e=>({...e,notes:r})),L(""),d(e=>[{type:"note_added",payload:{note:t},created_at:new Date().toISOString()},...e]),S.Am.success("Nota adicionada"),l()}catch{S.Am.error("Erro ao adicionar nota")}},X=async()=>{if(!I.trim())return;let t=I.trim().toLowerCase();try{await W.from("lead_tags").insert({lead_id:e,tag:t}),await W.from("lead_activities").insert({lead_id:e,type:"tag_added",payload:{tag:t}}),s(e=>e?{...e,lead_tags:[...e.lead_tags||[],{tag:t}]}:null),B(""),S.Am.success("Tag adicionada"),l()}catch{S.Am.error("Tag j\xe1 existe ou erro ao adicionar")}},Y=async t=>{try{await W.from("lead_tags").delete().eq("lead_id",e).eq("tag",t),s(e=>e?{...e,lead_tags:(e.lead_tags||[]).filter(e=>e.tag!==t)}:null),l()}catch{S.Am.error("Erro ao remover tag")}},Z=i?.lead_tags||[];return f.jsx(tY.yo,{open:r,onOpenChange:e=>!e&&n(),children:(0,f.jsxs)(tY.ue,{className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,f.jsxs)(tY.Tu,{children:[f.jsx(tY.bC,{children:"Detalhes do Lead"}),f.jsx(tY.Ei,{children:"Visualize e edite as informa\xe7\xf5es do lead"})]}),h?(0,f.jsxs)("div",{className:"space-y-4 mt-6",children:[f.jsx(rh.O,{className:"h-8 w-full"}),f.jsx(rh.O,{className:"h-20 w-full"})]}):i?(0,f.jsxs)(re,{defaultValue:"details",className:"mt-6",children:[(0,f.jsxs)(rd,{children:[f.jsx(rc,{value:"details",children:"Detalhes"}),f.jsx(rc,{value:"activity",children:"Atividades"}),f.jsx(rc,{value:"tasks",children:"Tarefas"})]}),f.jsx(ru,{value:"details",className:"space-y-4 mt-4",children:w?(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Nome/Empresa"}),f.jsx(C.I,{value:N.title,onChange:e=>A(t=>({...t,title:e.target.value}))})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Email"}),f.jsx(C.I,{type:"email",value:N.email,onChange:e=>A(t=>({...t,email:e.target.value}))})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Telefone / WhatsApp (DDI + n\xfamero)"}),f.jsx(E,{countryCode:N.phone_country_code,number:N.phone,onCountryCodeChange:e=>A(t=>({...t,phone_country_code:e})),onNumberChange:e=>A(t=>({...t,phone:e}))})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Site"}),f.jsx(C.I,{value:N.website,onChange:e=>A(t=>({...t,website:e.target.value}))})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Resumo"}),f.jsx("textarea",{className:"w-full min-h-[60px] rounded-md border px-3 py-2 text-sm",value:N.resumo,onChange:e=>A(t=>({...t,resumo:e.target.value}))})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Poss\xedvel nacionalidade"}),(0,f.jsxs)(b.Ph,{value:N.nacionalidade||"__none__",onValueChange:e=>A(t=>({...t,nacionalidade:e})),children:[f.jsx(b.i4,{children:f.jsx(b.ki,{placeholder:"Selecione"})}),(0,f.jsxs)(b.Bw,{children:[f.jsx(b.Ql,{value:"__none__",children:"Nenhuma"}),r5.map(e=>f.jsx(b.Ql,{value:e,children:e},e))]})]})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Valor (â‚¬)"}),f.jsx(C.I,{value:N.valor,onChange:e=>A(t=>({...t,valor:e.target.value})),placeholder:"Ex: 1.000,00 ou 1000",inputMode:"decimal"})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Origem"}),f.jsx(C.I,{value:N.source,onChange:e=>A(t=>({...t,source:e.target.value}))})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Respons\xe1vel"}),(0,f.jsxs)(b.Ph,{value:N.assignee_user_id||"__none__",onValueChange:e=>A(t=>({...t,assignee_user_id:e})),children:[f.jsx(b.i4,{children:f.jsx(b.ki,{placeholder:"Selecione"})}),(0,f.jsxs)(b.Bw,{children:[f.jsx(b.Ql,{value:"__none__",children:"Nenhum"}),t.map(e=>f.jsx(b.Ql,{value:e.id,children:e.name||e.email},e.id))]})]})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Notas"}),f.jsx("textarea",{className:"w-full min-h-[100px] rounded-md border px-3 py-2 text-sm",value:N.notes,onChange:e=>A(t=>({...t,notes:e.target.value}))})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[f.jsx(y.z,{onClick:q,disabled:g,children:"Salvar"}),f.jsx(y.z,{variant:"outline",onClick:()=>D(!1),children:"Cancelar"})]})]}):(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx("h3",{className:"font-semibold",children:N.title}),f.jsx("p",{className:"text-sm text-muted-foreground",children:N.source})]}),N.email&&(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx(r0,{className:"size-4 text-muted-foreground"}),f.jsx("a",{href:`mailto:${N.email}`,className:"text-sm hover:underline",children:N.email})]}),(N.phone||N.whatsapp)&&(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx(r1,{className:"size-4 text-muted-foreground"}),(0,f.jsxs)("span",{className:"text-sm",children:["+",N.phone_country_code," ",N.phone||N.whatsapp]}),f.jsx(y.z,{size:"sm",variant:"outline",asChild:!0,children:f.jsx("a",{href:function(e,t){let r=(e+t).replace(/\D/g,"");return r?`https://wa.me/${r}`:"#"}(N.phone_country_code,N.phone||N.whatsapp||""),target:"_blank",rel:"noopener noreferrer",children:"Entrar em contato (WhatsApp)"})})]}),N.website&&(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx(r2,{className:"size-4 text-muted-foreground"}),f.jsx("a",{href:N.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:underline truncate",children:N.website})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Respons\xe1vel"}),(0,f.jsxs)(b.Ph,{value:N.assignee_user_id||"__none__",onValueChange:V,children:[f.jsx(b.i4,{className:"mt-1",children:f.jsx(b.ki,{placeholder:"Selecione"})}),(0,f.jsxs)(b.Bw,{children:[f.jsx(b.Ql,{value:"__none__",children:"N\xe3o atribu\xeddo"}),t.map(e=>f.jsx(b.Ql,{value:e.id,children:e.name||e.email},e.id))]})]})]}),N.resumo&&(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Resumo"}),f.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:N.resumo})]}),(N.nacionalidade&&"__none__"!==N.nacionalidade||N.valor)&&(0,f.jsxs)("div",{className:"flex gap-4",children:[N.nacionalidade&&"__none__"!==N.nacionalidade&&(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Nacionalidade"}),f.jsx("p",{className:"text-sm mt-1",children:N.nacionalidade})]}),N.valor&&(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Valor"}),f.jsx("p",{className:"text-sm mt-1",children:(0,R.x)(N.valor)})]})]}),N.notes&&(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Notas"}),f.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:N.notes})]}),(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Tags"}),f.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Z.map(e=>(0,f.jsxs)(tB.C,{variant:"secondary",className:"cursor-pointer",onClick:()=>Y(e.tag),children:[e.tag," \xd7"]},e.tag))}),(0,f.jsxs)("div",{className:"flex gap-2 mt-2",children:[f.jsx(C.I,{placeholder:"Nova tag",value:I,onChange:e=>B(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),X())}),f.jsx(y.z,{size:"sm",onClick:X,children:"Adicionar"})]})]}),(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 pt-4",children:[f.jsx(y.z,{onClick:()=>D(!0),children:"Editar"}),a&&(0,f.jsxs)(y.z,{variant:"destructive",onClick:$,children:[f.jsx(tL.Z,{className:"mr-2 size-4"}),"Excluir lead"]}),(0,f.jsxs)("div",{className:"flex gap-2 flex-1",children:[f.jsx(C.I,{placeholder:"Adicionar nota...",value:F,onChange:e=>L(e.target.value)}),f.jsx(y.z,{size:"sm",onClick:U,children:f.jsx(r3,{className:"size-4"})})]})]})]})}),f.jsx(ru,{value:"activity",className:"mt-4",children:f.jsx(rJ,{className:"h-[400px]",children:f.jsx("div",{className:"space-y-3",children:0===o.length?f.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma atividade registrada"}):o.map((e,r)=>(0,f.jsxs)("div",{className:"rounded-lg border p-3 text-sm",children:[(0,f.jsxs)("p",{className:"font-medium",children:["stage_change"===e.type&&"Est\xe1gio alterado","assignee_change"===e.type&&(()=>{let r=e.payload,n=r?.old_assignee_id?t.find(e=>e.id===r.old_assignee_id)?.name:null,l=r?.new_assignee_id?t.find(e=>e.id===r.new_assignee_id)?.name:null;return n&&l?`Respons\xe1vel: ${n} â†’ ${l}`:l?`Respons\xe1vel: ${l}`:n?`Respons\xe1vel removido (era ${n})`:"Respons\xe1vel alterado"})(),"field_edit"===e.type&&"Dados editados","note_added"===e.type&&`Nota: ${e.payload?.note||""}`,"tag_added"===e.type&&`Tag adicionada: ${e.payload?.tag||""}`,"created"===e.type&&"Lead criado"]}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleString("pt-BR")})]},r))})})}),(0,f.jsxs)(ru,{value:"tasks",className:"mt-4",children:[f.jsx("div",{className:"mb-3",children:(0,f.jsxs)(y.z,{size:"sm",onClick:()=>k(!0),children:[f.jsx(v.Z,{className:"mr-2 size-4"}),"Adicionar tarefa"]})}),f.jsx(rJ,{className:"h-[360px]",children:f.jsx("div",{className:"space-y-3",children:0===c.length?f.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma tarefa"}):c.map(e=>(0,f.jsxs)("div",{className:"group rounded-lg border p-3 text-sm flex items-start justify-between gap-2",children:[(0,f.jsxs)("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"font-medium",children:e.title}),(0,f.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.status," â€¢"," ",e.due_date?new Date(e.due_date).toLocaleDateString("pt-BR"):"Sem data"]})]}),(0,f.jsxs)("div",{className:"flex gap-1 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx(y.z,{variant:"ghost",size:"icon",className:"size-8",onClick:t=>{t.stopPropagation(),O({id:e.id,title:e.title,description:e.description||null,due_date:e.due_date||null,status:e.status,assigned_to:e.assigned_to||null}),T(!0)},children:f.jsx(tF.Z,{className:"size-4"})}),f.jsx(y.z,{variant:"ghost",size:"icon",className:"size-8 text-destructive hover:text-destructive",onClick:t=>{t.stopPropagation(),confirm("Excluir esta tarefa?")&&W.from("tasks").delete().eq("id",e.id).then(({error:t})=>{t?S.Am.error((0,R.e)(t,"Erro ao excluir")):(u(t=>t.filter(t=>t.id!==e.id)),S.Am.success("Tarefa exclu\xedda"))})},children:f.jsx(tL.Z,{className:"size-4"})})]})]},e.id))})}),f.jsx(r8,{open:P,onOpenChange:k,leadId:e,onTaskCreated:()=>{W.from("tasks").select("*").eq("lead_id",e).order("due_date",{ascending:!0}).then(({data:e})=>u(e||[]))},members:t}),f.jsx(r4.t,{open:M,onOpenChange:T,task:z,onTaskUpdated:()=>{W.from("tasks").select("*").eq("lead_id",e).order("due_date",{ascending:!0}).then(({data:e})=>u(e||[]))},members:t})]})]}):null]})})}function r6({open:e,onOpenChange:t,onAdd:r}){let[n,l]=(0,m.useState)(""),[a,i]=(0,m.useState)(!1),s=async e=>{if(e.preventDefault(),n.trim()){i(!0);try{await r(n.trim()),l(""),t(!1)}finally{i(!1)}}};return f.jsx(D.Vq,{open:e,onOpenChange:t,children:(0,f.jsxs)(D.cZ,{children:[(0,f.jsxs)(D.fK,{children:[f.jsx(D.$N,{children:"Adicionar est\xe1gio"}),f.jsx(D.Be,{children:"Crie um novo est\xe1gio no pipeline"})]}),(0,f.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,f.jsxs)("div",{children:[f.jsx(_._,{children:"Nome do est\xe1gio"}),f.jsx(C.I,{value:n,onChange:e=>l(e.target.value),placeholder:"Ex: Proposta",disabled:a})]}),(0,f.jsxs)(D.cN,{children:[f.jsx(y.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),f.jsx(y.z,{type:"submit",disabled:a||!n.trim(),children:"Adicionar"})]})]})]})})}function r7({pipelineId:e,stages:t,members:r}){let n=(0,x.useRouter)(),[l,a]=(0,m.useState)(t),[i,s]=(0,m.useState)(null),[o,d]=(0,m.useState)(null),[c,u]=(0,m.useState)(!1),h=(0,j.e)(),p=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,m.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(ed(eV,{activationConstraint:{distance:10}}),ed(eU,{activationConstraint:{delay:200,tolerance:8}})),g=async(e,t,r)=>{let{error:n}=await h.from("leads").update({stage_id:t,position:r}).eq("id",e);return n?(S.Am.error("Erro ao mover lead"),!1):(await h.from("lead_activities").insert({lead_id:e,type:"stage_change",payload:{new_stage_id:t}}),!0)},b=async e=>{d(null);let{active:r,over:n}=e;if(!n)return;let i=String(r.id),s=String(n.id);if(i.startsWith("lead-")){let e=i.replace("lead-",""),r=s.startsWith("stage-")?s.replace("stage-",""):null,n=s.startsWith("lead-")?s.replace("lead-",""):null;if(r)a(t=>{let n=t.map(e=>({...e,leads:[...e.leads]})),l=n.find(t=>t.leads.some(t=>t.id===e)),a=l?.leads.find(t=>t.id===e);if(!l||!a)return t;l.leads=l.leads.filter(t=>t.id!==e);let i=n.find(e=>e.id===r);return i&&i.leads.push(a),n}),await g(e,r,0)?S.Am.success("Lead movido"):a(t);else if(n){let r=l.find(e=>e.leads.some(e=>e.id===n));if(!r)return;a(t=>{let l=t.map(e=>({...e,leads:[...e.leads]})),a=l.find(t=>t.leads.some(t=>t.id===e)),i=a?.leads.find(t=>t.id===e);if(!a||!i)return t;a.leads=a.leads.filter(t=>t.id!==e);let s=l.find(e=>e.id===r.id);if(s){let e=s.leads.findIndex(e=>e.id===n);s.leads.splice(e+1,0,i)}return l});let i=r.leads.findIndex(e=>e.id===n);await g(e,r.id,i+1)?S.Am.success("Lead movido"):a(t)}}},w=e=>{a(t=>t.map(t=>t.id===e.stage_id?{...t,leads:[...t.leads,e]}:t)),s(e.id)},D=async e=>{let{error:t}=await h.from("leads").delete().eq("id",e);if(t){S.Am.error("Erro ao excluir lead");return}s(null),a(t=>t.map(t=>({...t,leads:t.leads.filter(t=>t.id!==e)}))),S.Am.success("Lead exclu\xeddo"),n.refresh()},C=async(e,t)=>{let{error:r}=await h.from("stages").update({name:t}).eq("id",e);if(r)throw S.Am.error("Erro ao renomear est\xe1gio"),r;a(r=>r.map(r=>r.id===e?{...r,name:t}:r)),S.Am.success("Est\xe1gio renomeado")},_=async e=>{let t=l.find(t=>t.id===e);if(!t)return;if(t.leads.length>0){S.Am.error("Mova os leads para outro est\xe1gio antes de excluir");return}if(l.length<=1){S.Am.error("O pipeline precisa ter pelo menos um est\xe1gio");return}let{error:r}=await h.from("stages").delete().eq("id",e);if(r){S.Am.error("Erro ao excluir est\xe1gio");return}a(t=>t.filter(t=>t.id!==e)),S.Am.success("Est\xe1gio exclu\xeddo")},N=async t=>{let r=Math.max(...l.map(e=>e.position),-1),{data:n,error:i}=await h.from("stages").insert({pipeline_id:e,name:t,position:r+1}).select().single();if(i)throw S.Am.error("Erro ao adicionar est\xe1gio"),i;a(e=>[...e,{...n,leads:[]}]),S.Am.success("Est\xe1gio adicionado")};return(0,f.jsxs)(ti,{sensors:p,onDragStart:e=>{let t=String(e.active.id);if(t.startsWith("lead-")){let e=t.replace("lead-","");for(let t of l){let r=t.leads.find(t=>t.id===e);if(r){d(r);break}}}},onDragEnd:b,children:[(0,f.jsxs)("div",{className:"flex gap-4 overflow-x-auto pb-4 h-full min-h-[400px]",children:[l.map(t=>f.jsx(tU,{stage:t,onLeadClick:e=>s(e),onLeadCreated:w,onLeadDelete:D,pipelineId:e,onEditStage:C,onDeleteStage:_,canEditStages:!0},t.id)),f.jsx("div",{className:"flex w-72 shrink-0 flex-col items-center justify-center rounded-lg border border-dashed",children:(0,f.jsxs)(y.z,{variant:"ghost",className:"text-muted-foreground",onClick:()=>u(!0),children:[f.jsx(v.Z,{className:"mr-2 size-4"}),"Adicionar est\xe1gio"]})})]}),f.jsx(tb,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:o?f.jsx(tX,{lead:o}):null}),f.jsx(r6,{open:c,onOpenChange:u,onAdd:N}),i&&f.jsx(r9,{leadId:i,pipelineId:e,members:r,open:!!i,onClose:()=>s(null),onUpdate:(e=!1)=>{e&&s(null),n.refresh()},onDelete:D})]})}function ne({pipelineId:e,pipelines:t,stagesWithLeads:r,members:n,description:l}){let[a,i]=(0,m.useState)("__all__"),s=(0,m.useMemo)(()=>"__all__"===a?r:"__unassigned__"===a?r.map(e=>({...e,leads:e.leads.filter(e=>!e.assignee_user_id)})):r.map(e=>({...e,leads:e.leads.filter(e=>e.assignee_user_id===a)})),[a,r]);return(0,f.jsxs)(f.Fragment,{children:[f.jsx(k,{pipelines:t,currentPipelineId:e,stages:r,members:n,assigneeFilter:a,onAssigneeFilterChange:i}),l&&f.jsx("p",{className:"text-muted-foreground mb-2 text-sm",children:l}),f.jsx(r7,{pipelineId:e,stages:s,members:n})]})}},9868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(9510),l=r(7642);function a(){return(0,n.jsxs)("div",{className:"flex h-[calc(100vh-8rem)] flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[n.jsx(l.O,{className:"h-10 w-40"}),n.jsx(l.O,{className:"h-10 w-48"})]}),n.jsx("div",{className:"flex gap-4 flex-1 overflow-hidden",children:[1,2,3].map(e=>n.jsx(l.O,{className:"h-full w-72 shrink-0 rounded-lg"},e))})]})}},8794:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,dynamic:()=>d});var n=r(9510),l=r(5655),a=r(8585),i=r(8570);let s=(0,i.createProxy)(String.raw`D:\CRM Belgiflow\belgflow-crm\src\components\pipeline-name-setter.tsx#PipelineNameSetter`),o=(0,i.createProxy)(String.raw`D:\CRM Belgiflow\belgflow-crm\src\components\pipeline-view.tsx#PipelineView`),d="force-dynamic";async function c({params:e}){let{id:t}=await e,r=await (0,l.e)(),{data:{user:i}}=await r.auth.getUser();i||(0,a.redirect)("/login");let[d,c,u,h,p]=await Promise.all([r.from("pipelines").select("id, name").eq("is_archived",!1).order("created_at",{ascending:!1}),r.from("pipelines").select("id, name, description, is_archived").eq("id",t).single(),r.from("stages").select("*").eq("pipeline_id",t).order("position",{ascending:!0}),r.from("leads").select("*, lead_tags(tag), profiles:assignee_user_id(id, name, email)").eq("pipeline_id",t).order("position",{ascending:!0}),r.from("pipeline_members").select("user_id, profiles(id, name, email, role_global)").eq("pipeline_id",t)]),f=c.data;(!f||f.is_archived)&&(0,a.notFound)();let m=u.data||[],g=h.data||[],x=p.data||[],v=d.data||[],y=m.map(e=>({...e,leads:g.filter(t=>t.stage_id===e.id)})),b=x.map(e=>{let t=Array.isArray(e.profiles)?e.profiles[0]:e.profiles;return{id:e.user_id,name:t?.name||"",email:t?.email||"",role_global:t?.role_global}}).filter(e=>"ADMIN"!==e.role_global).map(({id:e,name:t,email:r})=>({id:e,name:t,email:r}));return(0,n.jsxs)("div",{className:"flex h-[calc(100vh-8rem)] flex-col",children:[n.jsx(s,{name:f.name}),n.jsx(o,{pipelineId:f.id,pipelines:v,stagesWithLeads:y,members:b,description:f.description})]})}},5629:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(9510),l=r(7642);function a(){return(0,n.jsxs)("div",{className:"flex h-[calc(100vh-8rem)] flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[n.jsx(l.O,{className:"h-10 w-40"}),n.jsx(l.O,{className:"h-10 w-48"})]}),(0,n.jsxs)("div",{className:"flex gap-4 flex-1",children:[n.jsx(l.O,{className:"h-full w-72 shrink-0 rounded-lg"}),n.jsx(l.O,{className:"h-full flex-1 rounded-lg"})]})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,374,702,557,621,15,531,886,273,822,495],()=>r(8675));module.exports=n})();