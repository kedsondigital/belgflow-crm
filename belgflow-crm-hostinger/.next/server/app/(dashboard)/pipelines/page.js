(()=>{var e={};e.id=157,e.ids=[157],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1984:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),t(3189),t(5629),t(1928),t(7407),t(5866),t(5649);var i=t(3191),s=t(8716),r=t(7922),n=t.n(r),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(a,l);let d=["",{children:["(dashboard)",{children:["pipelines",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3189)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,5629)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1928)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,7407)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,5649)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\pipelines\\page.tsx"],p="/(dashboard)/pipelines/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/pipelines/page",pathname:"/pipelines",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9512:(e,a,t)=>{Promise.resolve().then(t.bind(t,6237))},3855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});let i=(0,t(5578).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7136:(e,a,t)=>{"use strict";t.d(a,{i:()=>m});var i=t(326),s=t(7577),r=t(5047),n=t(9701),o=t(4118),l=t(1664),d=t(1190),c=t(4794),p=t(5999);function m({open:e,onOpenChange:a,onCreated:t}){let m=(0,r.useRouter)(),[u,f]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[g,b]=(0,s.useState)(!1),w=async e=>{if(e.preventDefault(),!u.trim()){p.Am.error("Nome \xe9 obrigat\xf3rio");return}b(!0);try{let e=(0,n.e)(),{data:{user:i}}=await e.auth.getUser();if(!i)throw Error("N\xe3o autenticado");let{data:s,error:r}=await e.from("pipelines").insert({name:u.trim(),description:x.trim()||null,created_by:i.id}).select("id").single();if(r)throw r;let{error:o}=await e.from("pipeline_members").insert({pipeline_id:s.id,user_id:i.id,role_in_pipeline:"admin"});if(o)throw o;let{error:l}=await e.from("stages").insert([{name:"Entrada",position:0},{name:"Qualifica\xe7\xe3o",position:1},{name:"Proposta",position:2},{name:"Negocia\xe7\xe3o",position:3},{name:"Fechado",position:4}].map(e=>({pipeline_id:s.id,name:e.name,position:e.position})));if(l)throw l;f(""),h(""),a(!1),p.Am.success("Pipeline criado com sucesso!"),t?t(s.id):(m.push(`/pipelines/${s.id}`),m.refresh())}catch(a){let e=a&&"object"==typeof a&&"message"in a?String(a.message):a instanceof Error?a.message:"Erro ao criar pipeline";p.Am.error(e)}finally{b(!1)}},j=()=>{f(""),h(""),a(!1)};return i.jsx(o.Vq,{open:e,onOpenChange:j,children:(0,i.jsxs)(o.cZ,{children:[(0,i.jsxs)(o.fK,{children:[i.jsx(o.$N,{children:"Novo Pipeline"}),i.jsx(o.Be,{children:"Crie um novo pipeline com est\xe1gios padr\xe3o (Entrada, Qualifica\xe7\xe3o, Proposta, Negocia\xe7\xe3o, Fechado)"})]}),(0,i.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx(c._,{htmlFor:"pipeline-name",children:"Nome do pipeline *"}),i.jsx(d.I,{id:"pipeline-name",placeholder:"Ex: Vendas 2025",value:u,onChange:e=>f(e.target.value),required:!0,disabled:g})]}),(0,i.jsxs)("div",{children:[i.jsx(c._,{htmlFor:"pipeline-desc",children:"Descri\xe7\xe3o (opcional)"}),i.jsx(d.I,{id:"pipeline-desc",placeholder:"Breve descri\xe7\xe3o do pipeline",value:x,onChange:e=>h(e.target.value),disabled:g})]}),(0,i.jsxs)(o.cN,{children:[i.jsx(l.z,{type:"button",variant:"outline",onClick:j,children:"Cancelar"}),i.jsx(l.z,{type:"submit",disabled:g||!u.trim(),children:g?"Criando...":"Criar pipeline"})]})]})]})})}},6237:(e,a,t)=>{"use strict";t.d(a,{PipelinesView:()=>d});var i=t(326),s=t(7577),r=t(5047),n=t(3855),o=t(1664),l=t(7136);function d(e){let a=(0,r.useRouter)(),[t,d]=(0,s.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-24",children:[(0,i.jsxs)("p",{className:"text-muted-foreground mb-6 text-center",children:["Nenhum pipeline encontrado.",i.jsx("br",{}),"Crie seu primeiro pipeline para come\xe7ar."]}),i.jsx(l.i,{open:t,onOpenChange:d,onCreated:e=>{a.push(`/pipelines/${e}`),a.refresh()}}),(0,i.jsxs)(o.z,{onClick:()=>d(!0),children:[i.jsx(n.Z,{className:"mr-2 size-4"}),"Criar primeiro pipeline"]})]})}},4118:(e,a,t)=>{"use strict";t.d(a,{$N:()=>f,Be:()=>x,Vq:()=>l,cN:()=>u,cZ:()=>p,fK:()=>m});var i=t(326),s=t(7577),r=t(7113),n=t(4019),o=t(1223);let l=r.fC;r.xz;let d=r.h_;r.x8;let c=s.forwardRef(({className:e,...a},t)=>i.jsx(r.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=r.aV.displayName;let p=s.forwardRef(({className:e,children:a,...t},s)=>(0,i.jsxs)(d,{children:[i.jsx(c,{}),(0,i.jsxs)(r.VY,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,i.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(n.Z,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=r.VY.displayName;let m=({className:e,...a})=>i.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let u=({className:e,...a})=>i.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});u.displayName="DialogFooter";let f=s.forwardRef(({className:e,...a},t)=>i.jsx(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));f.displayName=r.Dx.displayName;let x=s.forwardRef(({className:e,...a},t)=>i.jsx(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",e),...a}));x.displayName=r.dk.displayName},4794:(e,a,t)=>{"use strict";t.d(a,{_:()=>d});var i=t(326),s=t(7577),r=t(4478),n=t(9360),o=t(1223);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...a},t)=>i.jsx(r.f,{ref:t,className:(0,o.cn)(l(),e),...a}));d.displayName=r.f.displayName},9701:(e,a,t)=>{"use strict";t.d(a,{e:()=>s});var i=t(6305);function s(){return(0,i.createBrowserClient)("https://belgiflow-supabase.bnw7is.easypanel.host","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE")}},5629:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var i=t(9510),s=t(7642);function r(){return(0,i.jsxs)("div",{className:"flex h-[calc(100vh-8rem)] flex-col gap-4",children:[(0,i.jsxs)("div",{className:"flex gap-4",children:[i.jsx(s.O,{className:"h-10 w-40"}),i.jsx(s.O,{className:"h-10 w-48"})]}),(0,i.jsxs)("div",{className:"flex gap-4 flex-1",children:[i.jsx(s.O,{className:"h-full w-72 shrink-0 rounded-lg"}),i.jsx(s.O,{className:"h-full flex-1 rounded-lg"})]})]})}},3189:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var i=t(9510),s=t(5655),r=t(8585);let n=(0,t(8570).createProxy)(String.raw`D:\CRM Belgiflow\belgflow-crm\src\components\pipelines-view.tsx#PipelinesView`);async function o(){let e=await (0,s.e)(),{data:{user:a}}=await e.auth.getUser();a||(0,r.redirect)("/login");let{data:t}=await e.from("pipelines").select("id, name").eq("is_archived",!1).order("created_at",{ascending:!1});return t&&t.length>0&&(0,r.redirect)(`/pipelines/${t[0].id}`),i.jsx(n,{pipelines:[]})}}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),i=a.X(0,[948,374,702,557,621,15,531,886,822],()=>t(1984));module.exports=i})();