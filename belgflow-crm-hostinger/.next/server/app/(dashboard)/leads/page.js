(()=>{var e={};e.id=926,e.ids=[926],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},5749:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(9591),a(5017),a(1928),a(7407),a(5866),a(5649);var t=a(3191),r=a(8716),l=a(7922),n=a.n(l),d=a(5231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);a.d(s,i);let o=["",{children:["(dashboard)",{children:["leads",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9591)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\leads\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,5017)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\leads\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1928)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,7407)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,5649)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\leads\\page.tsx"],u="/(dashboard)/leads/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/leads/page",pathname:"/leads",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9449:(e,s,a)=>{Promise.resolve().then(a.bind(a,5503)),Promise.resolve().then(a.bind(a,6618)),Promise.resolve().then(a.bind(a,1280))},5503:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let t=a(4129);function r(e){let{reason:s,children:a}=e;throw new t.BailoutToCSRError(s)}},6618:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadCss",{enumerable:!0,get:function(){return l}});let t=a(326),r=a(4580);function l(e){let{moduleIds:s}=e,a=(0,r.getExpectedRequestStore)("next/dynamic css"),l=[];if(a.reactLoadableManifest&&s){let e=a.reactLoadableManifest;for(let a of s){if(!e[a])continue;let s=e[a].files.filter(e=>e.endsWith(".css"));l.push(...s)}}return 0===l.length?null:(0,t.jsx)(t.Fragment,{children:l.map(e=>(0,t.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},1280:(e,s,a)=>{"use strict";a.r(s),a.d(s,{LeadsTable:()=>u});var t=a(326),r=a(7577),l=a(434),n=a(3819),d=a(1190),i=a(8443),o=a(9280),c=a(1664);function u({leads:e,pipelines:s}){let[a,u]=(0,r.useState)(""),[m,p]=(0,r.useState)("all"),[f,x]=(0,r.useState)("all"),h=Array.from(new Set(e.map(e=>e.source).filter(Boolean))),g=e.filter(e=>{let s=!a||e.title?.toLowerCase().includes(a.toLowerCase())||e.email?.toLowerCase().includes(a.toLowerCase())||e.lead_tags?.some(e=>e.tag.toLowerCase().includes(a.toLowerCase())),t="all"===m||e.stages?.pipeline_id===m,r="all"===f||e.source===f;return s&&t&&r});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[t.jsx(d.I,{placeholder:"Buscar por nome, email, tag...",value:a,onChange:e=>u(e.target.value),className:"max-w-xs"}),(0,t.jsxs)(o.Ph,{value:m,onValueChange:p,children:[t.jsx(o.i4,{className:"w-[180px]",children:t.jsx(o.ki,{placeholder:"Pipeline"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"Todos os pipelines"}),s.map(e=>t.jsx(o.Ql,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(o.Ph,{value:f,onValueChange:x,children:[t.jsx(o.i4,{className:"w-[180px]",children:t.jsx(o.ki,{placeholder:"Origem"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"Todas as origens"}),h.map(e=>t.jsx(o.Ql,{value:e,children:e},e))]})]})]}),t.jsx("div",{className:"rounded-md border",children:(0,t.jsxs)(n.iA,{children:[t.jsx(n.xD,{children:(0,t.jsxs)(n.SC,{children:[t.jsx(n.ss,{children:"Lead"}),t.jsx(n.ss,{children:"Contato"}),t.jsx(n.ss,{children:"Pipeline / Est\xe1gio"}),t.jsx(n.ss,{children:"Origem"}),t.jsx(n.ss,{children:"Respons\xe1vel"}),t.jsx(n.ss,{children:"Tags"}),t.jsx(n.ss,{children:"Data"}),t.jsx(n.ss,{})]})}),t.jsx(n.RM,{children:0===g.length?t.jsx(n.SC,{children:t.jsx(n.pj,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"Nenhum lead encontrado"})}):g.map(e=>(0,t.jsxs)(n.SC,{children:[t.jsx(n.pj,{className:"font-medium",children:e.title}),t.jsx(n.pj,{children:(0,t.jsxs)("div",{className:"text-sm",children:[e.email&&t.jsx("div",{children:e.email}),e.phone&&t.jsx("div",{className:"text-muted-foreground",children:e.phone})]})}),t.jsx(n.pj,{children:t.jsx("div",{className:"text-sm",children:(()=>{let a=Array.isArray(e.stages)?e.stages[0]:e.stages;return`${s.find(e=>e.id===a?.pipeline_id)?.name||"-"} / ${a?.name||"-"}`})()})}),t.jsx(n.pj,{children:t.jsx(i.C,{variant:"outline",children:e.source})}),t.jsx(n.pj,{children:(()=>{let s=Array.isArray(e.profiles)?e.profiles[0]:e.profiles;return s?.name||"-"})()}),t.jsx(n.pj,{children:t.jsx("div",{className:"flex gap-1 flex-wrap",children:(e.lead_tags||[]).slice(0,3).map(e=>t.jsx(i.C,{variant:"secondary",className:"text-xs",children:e.tag},e.tag))})}),t.jsx(n.pj,{className:"text-muted-foreground text-sm",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),t.jsx(n.pj,{children:t.jsx(c.z,{variant:"ghost",size:"sm",asChild:!0,children:t.jsx(l.default,{href:`/pipelines/${(Array.isArray(e.stages)?e.stages[0]:e.stages)?.pipeline_id||""}`,children:"Ver"})})})]},e.id))})]})})]})}},8443:(e,s,a)=>{"use strict";a.d(s,{C:()=>d});var t=a(326);a(7577);var r=a(9360),l=a(1223);let n=(0,r.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,...a}){return t.jsx("div",{className:(0,l.cn)(n({variant:s}),e),...a})}},9280:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var t=a(326),r=a(7577),l=a(174),n=a(8393),d=a(6633),i=a(2933),o=a(1223);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.xz,{ref:r,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,t.jsx(l.JO,{asChild:!0,children:t.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=l.xz.displayName;let p=r.forwardRef(({className:e,...s},a)=>t.jsx(l.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(d.Z,{className:"h-4 w-4"})}));p.displayName=l.u_.displayName;let f=r.forwardRef(({className:e,...s},a)=>t.jsx(l.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(n.Z,{className:"h-4 w-4"})}));f.displayName=l.$G.displayName;let x=r.forwardRef(({className:e,children:s,position:a="popper",...r},n)=>t.jsx(l.h_,{children:(0,t.jsxs)(l.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[t.jsx(p,{}),t.jsx(l.l_,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(f,{})]})}));x.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.__,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let h=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.ck,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(i.Z,{className:"h-4 w-4"})})}),t.jsx(l.eT,{children:s})]}));h.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},3819:(e,s,a)=>{"use strict";a.d(s,{RM:()=>i,SC:()=>o,iA:()=>n,pj:()=>u,ss:()=>c,xD:()=>d});var t=a(326),r=a(7577),l=a(1223);let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",e),...s}));d.displayName="TableHeader";let i=r.forwardRef(({className:e,...s},a)=>t.jsx("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",r.forwardRef(({className:e,...s},a)=>t.jsx("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("th",{ref:a,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s}));c.displayName="TableHead";let u=r.forwardRef(({className:e,...s},a)=>t.jsx("td",{ref:a,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s}));u.displayName="TableCell",r.forwardRef(({className:e,...s},a)=>t.jsx("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},8318:(e,s,a)=>{"use strict";a.d(s,{default:()=>r.a});var t=a(4567),r=a.n(t)},4567:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let t=a(3370);a(9510),a(1159);let r=t._(a(6155));function l(e,s){var a;let t={loading:e=>{let{error:s,isLoading:a,pastDelay:t}=e;return null}};"function"==typeof e&&(t.loader=e);let l={...t,...s};return(0,r.default)({...l,modules:null==(a=l.loadableGenerated)?void 0:a.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},3689:(e,s,a)=>{"use strict";let{createProxy:t}=a(8570);e.exports=t("D:\\CRM Belgiflow\\belgflow-crm\\node_modules\\next\\dist\\shared\\lib\\lazy-dynamic\\dynamic-bailout-to-csr.js")},6155:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let t=a(9510),r=a(1159),l=a(3689),n=a(4459);function d(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(d(()=>null)),loading:null,ssr:!0},o=function(e){let s={...i,...e},a=(0,r.lazy)(()=>s.loader().then(d)),o=s.loading;function c(e){let d=o?(0,t.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=s.ssr?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.PreloadCss,{moduleIds:s.modules}),(0,t.jsx)(a,{...e})]}):(0,t.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(a,{...e})});return(0,t.jsx)(r.Suspense,{fallback:d,children:i})}return c.displayName="LoadableComponent",c}},4459:(e,s,a)=>{"use strict";let{createProxy:t}=a(8570);e.exports=t("D:\\CRM Belgiflow\\belgflow-crm\\node_modules\\next\\dist\\shared\\lib\\lazy-dynamic\\preload-css.js")},5017:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var t=a(9510),r=a(7642);function l(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx(r.O,{className:"h-8 w-32 mb-2"}),t.jsx(r.O,{className:"h-4 w-64"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(r.O,{className:"h-10 w-full"}),t.jsx(r.O,{className:"h-96 w-full"})]})]})}},9591:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var t=a(9510),r=a(8318),l=a(5655),n=a(8585),d=a(7642);let i=(0,r.default)(()=>a.e(975).then(a.bind(a,1975)).then(e=>e.LeadsTable),{loadableGenerated:{modules:["app\\(dashboard)\\leads\\page.tsx -> @/components/leads-table"]},loading:()=>t.jsx(d.O,{className:"h-96 w-full"}),ssr:!0});async function o(){let e=await (0,l.e)(),{data:{user:s}}=await e.auth.getUser();s||(0,n.redirect)("/login");let[a,r]=await Promise.all([e.from("leads").select("id, title, email, phone, source, outcome, created_at, stage_id, assignee_user_id, lead_tags(tag), stages(name, pipeline_id), profiles:assignee_user_id(name, email)").order("created_at",{ascending:!1}),e.from("pipelines").select("id, name").eq("is_archived",!1)]),d=a.data||[],o=r.data||[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Leads"}),t.jsx("p",{className:"text-muted-foreground",children:"Visualize e gerencie todos os leads"})]}),t.jsx(i,{leads:d,pipelines:o})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[948,374,702,557,621,15,531,273,822],()=>a(5749));module.exports=t})();