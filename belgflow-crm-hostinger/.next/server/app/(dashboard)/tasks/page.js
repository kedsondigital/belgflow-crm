(()=>{var e={};e.id=755,e.ids=[755],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},8617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),r(1909),r(8282),r(1928),r(7407),r(5866),r(5649);var s=r(3191),a=r(8716),n=r(7922),l=r.n(n),i=r(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(dashboard)",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1909)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\tasks\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,8282)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\tasks\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1928)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,7407)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,5649)),"D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\CRM Belgiflow\\belgflow-crm\\src\\app\\(dashboard)\\tasks\\page.tsx"],u="/(dashboard)/tasks/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/tasks/page",pathname:"/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4964:(e,t,r)=>{Promise.resolve().then(r.bind(r,5503)),Promise.resolve().then(r.bind(r,6618)),Promise.resolve().then(r.bind(r,1114))},5503:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=r(4129);function a(e){let{reason:t,children:r}=e;throw new s.BailoutToCSRError(t)}},6618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let s=r(326),a=r(4580);function n(e){let{moduleIds:t}=e,r=(0,a.getExpectedRequestStore)("next/dynamic css"),n=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,s.jsx)(s.Fragment,{children:n.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},1114:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TasksList:()=>x});var s=r(326),a=r(7577),n=r(5047),l=r(8443),i=r(1664),o=r(9752),d=r(3042),c=r(9701),u=r(4389),p=r(8091),f=r(5999),m=r(1223),h=r(9808);function x({tasks:e,members:t=[]}){let r=(0,n.useRouter)(),x=(0,c.e)(),[g,b]=(0,a.useState)(e),[y,v]=(0,a.useState)(!1),[j,w]=(0,a.useState)(null),_=async(e,t)=>{let r="completed"===t?"pending":"completed",{error:s}=await x.from("tasks").update({status:r}).eq("id",e);s?f.Am.error("Erro ao atualizar tarefa"):(f.Am.success("Tarefa atualizada"),b(t=>t.map(t=>t.id===e?{...t,status:r}:t)))},k={pending:"secondary",in_progress:"default",completed:"outline",cancelled:"destructive"};return 0===e.length?s.jsx(o.Zb,{children:s.jsx(o.aY,{className:"py-12 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada"})}):(0,s.jsxs)("div",{className:"space-y-3",children:[g.map(e=>s.jsx(o.Zb,{children:s.jsx(o.Ol,{className:"py-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx(d.X,{checked:"completed"===e.status,onCheckedChange:()=>_(e.id,e.status)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-medium ${"completed"===e.status?"line-through text-muted-foreground":""}`,children:e.title}),e.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(l.C,{variant:k[e.status],children:e.status}),(()=>{let t=Array.isArray(e.leads)?e.leads[0]:e.leads;return t?.title?(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Lead: ",t.title]}):null})(),e.due_date&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Prazo: ",new Date(e.due_date).toLocaleDateString("pt-BR")]})]})]}),(0,s.jsxs)("div",{className:"flex gap-1 shrink-0",children:[s.jsx(i.z,{variant:"ghost",size:"icon",className:"size-8",onClick:()=>{w({id:e.id,title:e.title,description:e.description||null,due_date:e.due_date||null,status:e.status,assigned_to:e.assigned_to||null}),v(!0)},children:s.jsx(u.Z,{className:"size-4"})}),s.jsx(i.z,{variant:"ghost",size:"icon",className:"size-8 text-destructive hover:text-destructive",onClick:async()=>{if(!confirm("Excluir esta tarefa?"))return;let{error:t}=await x.from("tasks").delete().eq("id",e.id);t?f.Am.error((0,m.e)(t,"Erro ao excluir")):(b(t=>t.filter(t=>t.id!==e.id)),f.Am.success("Tarefa exclu\xedda"))},children:s.jsx(p.Z,{className:"size-4"})})]})]})})},e.id)),s.jsx(h.t,{open:y,onOpenChange:v,task:j,onTaskUpdated:()=>{r.refresh()},members:t})]})}},3042:(e,t,r)=>{"use strict";r.d(t,{X:()=>O});var s=r(326),a=r(7577),n=r(8051),l=r(2561),i=r(2067),o=r(3405),d=r(2566),c=r(9815);r(962);var u=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}var f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){let e,l;let i=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,o=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(o.ref=t?(0,n.F)(t,i):i),a.cloneElement(r,o)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...l}=e,i=a.Children.toArray(n),o=i.find(p);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...l,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(t,{...l,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),l=a.forwardRef((e,a)=>{let{asChild:n,...l}=e,i=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i,{...l,ref:a})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{}),m="Checkbox",[h,x]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>a.createContext(e));return function(r){let s=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return n.scopeName=e,[function(t,n){let l=a.createContext(n),i=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,d=r?.[e]?.[i]||l,c=a.useMemo(()=>o,Object.values(o));return(0,s.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(r,s){let o=s?.[e]?.[i]||l,d=a.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(n,...t)]}(m),[g,b]=h(m);function y(e){let{__scopeCheckbox:t,checked:r,children:n,defaultChecked:l,disabled:o,form:d,name:c,onCheckedChange:u,required:p,value:f="on",internal_do_not_use_render:h}=e,[x,b]=(0,i.T)({prop:r,defaultProp:l??!1,onChange:u,caller:m}),[y,v]=a.useState(null),[j,w]=a.useState(null),_=a.useRef(!1),k=!y||!!d||!!y.closest("form"),N={checked:x,disabled:o,setChecked:b,control:y,setControl:v,name:c,form:d,value:f,hasConsumerStoppedPropagationRef:_,required:p,defaultChecked:!C(l)&&l,isFormControl:k,bubbleInput:j,setBubbleInput:w};return(0,s.jsx)(g,{scope:t,...N,children:"function"==typeof h?h(N):n})}var v="CheckboxTrigger",j=a.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...i},o)=>{let{control:d,value:c,disabled:u,checked:p,required:m,setControl:h,setChecked:x,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:j}=b(v,e),w=(0,n.e)(o,h),_=a.useRef(p);return a.useEffect(()=>{let e=d?.form;if(e){let t=()=>x(_.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,x]),(0,s.jsx)(f.button,{type:"button",role:"checkbox","aria-checked":C(p)?"mixed":p,"aria-required":m,"data-state":R(p),"data-disabled":u?"":void 0,disabled:u,value:c,...i,ref:w,onKeyDown:(0,l.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.Mj)(r,e=>{x(e=>!!C(e)||!e),j&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});j.displayName=v;var w=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:a,checked:n,defaultChecked:l,required:i,disabled:o,value:d,onCheckedChange:c,form:u,...p}=e;return(0,s.jsx)(y,{__scopeCheckbox:r,checked:n,defaultChecked:l,disabled:o,required:i,onCheckedChange:c,name:a,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{...p,ref:t,__scopeCheckbox:r}),e&&(0,s.jsx)(P,{__scopeCheckbox:r})]})})});w.displayName=m;var _="CheckboxIndicator",k=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...n}=e,l=b(_,r);return(0,s.jsx)(c.z,{present:a||C(l.checked)||!0===l.checked,children:(0,s.jsx)(f.span,{"data-state":R(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});k.displayName=_;var N="CheckboxBubbleInput",P=a.forwardRef(({__scopeCheckbox:e,...t},r)=>{let{control:l,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:u,required:p,disabled:m,name:h,value:x,form:g,bubbleInput:y,setBubbleInput:v}=b(N,e),j=(0,n.e)(r,v),w=(0,o.D)(c),_=(0,d.t)(l);a.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!i.current;if(w!==c&&e){let r=new Event("click",{bubbles:t});y.indeterminate=C(c),e.call(y,!C(c)&&c),y.dispatchEvent(r)}},[y,w,c,i]);let k=a.useRef(!C(c)&&c);return(0,s.jsx)(f.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??k.current,required:p,disabled:m,name:h,value:x,form:g,...t,tabIndex:-1,ref:j,style:{...t.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function R(e){return C(e)?"indeterminate":e?"checked":"unchecked"}P.displayName=N;var E=r(2933),M=r(1223);let O=a.forwardRef(({className:e,...t},r)=>s.jsx(w,{ref:r,className:(0,M.cn)("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(k,{className:(0,M.cn)("grid place-content-center text-current"),children:s.jsx(E.Z,{className:"h-4 w-4"})})}));O.displayName=w.displayName},8318:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(4567),a=r.n(s)},4567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let s=r(3370);r(9510),r(1159);let a=s._(r(6155));function n(e,t){var r;let s={loading:e=>{let{error:t,isLoading:r,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let n={...s,...t};return(0,a.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3689:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("D:\\CRM Belgiflow\\belgflow-crm\\node_modules\\next\\dist\\shared\\lib\\lazy-dynamic\\dynamic-bailout-to-csr.js")},6155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=r(9510),a=r(1159),n=r(3689),l=r(4459);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},r=(0,a.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.PreloadCss,{moduleIds:t.modules}),(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(a.Suspense,{fallback:i,children:o})}return c.displayName="LoadableComponent",c}},4459:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("D:\\CRM Belgiflow\\belgflow-crm\\node_modules\\next\\dist\\shared\\lib\\lazy-dynamic\\preload-css.js")},8282:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),a=r(7642);function n(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx(a.O,{className:"h-8 w-40 mb-2"}),s.jsx(a.O,{className:"h-4 w-56"})]}),s.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(e=>s.jsx(a.O,{className:"h-24 w-full rounded-lg"},e))})]})}},1909:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(9510),a=r(8318),n=r(5655),l=r(8585),i=r(7642);let o=(0,a.default)(()=>r.e(183).then(r.bind(r,183)).then(e=>e.TasksList),{loadableGenerated:{modules:["app\\(dashboard)\\tasks\\page.tsx -> @/components/tasks-list"]},loading:()=>s.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(e=>s.jsx(i.O,{className:"h-24 w-full rounded-lg"},e))}),ssr:!0});async function d(){let e=await (0,n.e)(),{data:{user:t}}=await e.auth.getUser();t||(0,l.redirect)("/login");let{data:r}=await e.from("tasks").select(`
      id,
      title,
      description,
      due_date,
      status,
      lead_id,
      assigned_to,
      leads(title),
      profiles:assigned_to(name, email)
    `).or(`assigned_to.eq.${t.id},assigned_to.is.null`).order("due_date",{ascending:!0});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Minhas Tarefas"}),s.jsx("p",{className:"text-muted-foreground",children:"Tarefas atribu\xeddas a voc\xea ou sem respons\xe1vel"})]}),s.jsx(o,{tasks:r||[]})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,374,702,557,621,15,531,886,273,822,495],()=>r(8617));module.exports=s})();